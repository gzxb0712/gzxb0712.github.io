<!DOCTYPE html>
<html lang="zh-cn">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>ftp在centos中安装 - Bill World</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="gzxb0712" /><meta name="description" content=" 参考博客 https://segmentfault.com/a/1190000021457476 https://segmentfault.com/a/1190000008161400
 安装配置vsftpd做FTP服务，我们的Web应用使用git管理进行迭代，公共文件软件存储使用开源网盘Seafile来管理，基本够用。想不到FTP的使用的场景，感觉它好像老去了，虽然现在基本没有用到这个工具，硬件需要使用FTP来下载配置文件，于是研究使用了一下，记录了一下使用过程
" /><meta name="keywords" content="Mac, Github, Vue, React, Front End" />






<meta name="generator" content="Hugo 0.74.3 with theme even" />


<link rel="canonical" href="https://xiebiao.top/post/ftp_centos_install/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">

<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<link href="/sass/main.min.651e6917abb0239242daa570c2bec9867267bbcd83646da5a850afe573347b44.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">
<link rel="stylesheet" href="/css/reset-even.css">


<meta property="og:title" content="ftp在centos中安装" />
<meta property="og:description" content="
参考博客
https://segmentfault.com/a/1190000021457476
https://segmentfault.com/a/1190000008161400

安装配置vsftpd做FTP服务，我们的Web应用使用git管理进行迭代，公共文件软件存储使用开源网盘Seafile来管理，基本够用。想不到FTP的使用的场景，感觉它好像老去了，虽然现在基本没有用到这个工具，硬件需要使用FTP来下载配置文件，于是研究使用了一下，记录了一下使用过程" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://xiebiao.top/post/ftp_centos_install/" />
<meta property="article:published_time" content="2019-12-17T22:21:37+00:00" />
<meta property="article:modified_time" content="2019-12-17T22:21:37+00:00" />
<meta itemprop="name" content="ftp在centos中安装">
<meta itemprop="description" content="
参考博客
https://segmentfault.com/a/1190000021457476
https://segmentfault.com/a/1190000008161400

安装配置vsftpd做FTP服务，我们的Web应用使用git管理进行迭代，公共文件软件存储使用开源网盘Seafile来管理，基本够用。想不到FTP的使用的场景，感觉它好像老去了，虽然现在基本没有用到这个工具，硬件需要使用FTP来下载配置文件，于是研究使用了一下，记录了一下使用过程">
<meta itemprop="datePublished" content="2019-12-17T22:21:37+00:00" />
<meta itemprop="dateModified" content="2019-12-17T22:21:37+00:00" />
<meta itemprop="wordCount" content="5481">



<meta itemprop="keywords" content="ftp,centos," />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="ftp在centos中安装"/>
<meta name="twitter:description" content="
参考博客
https://segmentfault.com/a/1190000021457476
https://segmentfault.com/a/1190000008161400

安装配置vsftpd做FTP服务，我们的Web应用使用git管理进行迭代，公共文件软件存储使用开源网盘Seafile来管理，基本够用。想不到FTP的使用的场景，感觉它好像老去了，虽然现在基本没有用到这个工具，硬件需要使用FTP来下载配置文件，于是研究使用了一下，记录了一下使用过程"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">Bill World</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">首页</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">归档</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">分类</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">标签</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">关于我</li>
      </a>
  </ul>
</nav>
  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">Bill World</a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">首页</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">归档</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">分类</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">标签</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">关于我</a>
      </li>
  </ul>
</nav>
    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">ftp在centos中安装</h1>

      <div class="post-meta">
        <span class="post-time"> 2019-12-17 22:21 </span>
        <div class="post-category">
            <a href="/categories/linux/"> linux </a>
            </div>
          <span class="more-meta"> 约 5481 字 </span>
          <span class="more-meta"> 预计阅读 11 分钟 </span>
        <span id="busuanzi_container_page_pv" class="more-meta"> <span id="busuanzi_value_page_pv"><img src="/img/spinner.svg" alt="spinner.svg"/></span> 次阅读 </span>
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">文章目录</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#安装">安装</a></li>
    <li><a href="#查看位置">查看位置</a></li>
    <li><a href="#启动vsftpd服务">启动vsftpd服务</a></li>
    <li><a href="#关闭firewall和selinux">关闭firewall和SELinux</a></li>
    <li><a href="#修改配置文件">修改配置文件</a></li>
    <li><a href="#匿名登录">匿名登录</a></li>
    <li><a href="#多用户配置">多用户配置</a>
      <ul>
        <li><a href="#创建宿主用户">创建宿主用户</a></li>
        <li><a href="#建立虚拟用户文件">建立虚拟用户文件</a></li>
        <li><a href="#生成虚拟用户数据文件">生成虚拟用户数据文件</a></li>
        <li><a href="#创建用户配置">创建用户配置</a></li>
        <li><a href="#创建用户目录">创建用户目录</a></li>
        <li><a href="#最后重启vsftpd服务器">最后重启vsftpd服务器</a></li>
      </ul>
    </li>
    <li><a href="#服务运维">服务运维</a></li>
    <li><a href="#ftp命令">FTP命令</a>
      <ul>
        <li><a href="#关闭ftp连接">关闭FTP连接</a></li>
        <li><a href="#下载文件">下载文件</a></li>
        <li><a href="#上传文件">上传文件</a></li>
      </ul>
    </li>
    <li><a href="#状态码">状态码</a></li>
  </ul>

  <ul>
    <li><a href="#71-浏览器测试">7.1 浏览器测试</a>
      <ul>
        <li><a href="#711-匿名测试">7.1.1 匿名测试</a></li>
        <li><a href="#712-用户登录测试">7.1.2 用户登录测试</a></li>
      </ul>
    </li>
    <li><a href="#72-ftp命令测试">7.2 ftp命令测试</a>
      <ul>
        <li><a href="#721-匿名测试">7.2.1 匿名测试</a></li>
        <li><a href="#722-用户登录测试">7.2.2 用户登录测试</a></li>
      </ul>
    </li>
    <li><a href="#73-wget测试">7.3 wget测试</a>
      <ul>
        <li><a href="#731-匿名测试">7.3.1 匿名测试</a></li>
        <li><a href="#732-用户登录测试">7.3.2 用户登录测试</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <blockquote>
<p>参考博客
<a href="https://segmentfault.com/a/1190000021457476">https://segmentfault.com/a/1190000021457476</a>
<a href="https://segmentfault.com/a/1190000008161400">https://segmentfault.com/a/1190000008161400</a></p>
</blockquote>
<p>安装配置vsftpd做FTP服务，我们的Web应用使用git管理进行迭代，公共文件软件存储使用开源网盘Seafile来管理，基本够用。想不到FTP的使用的场景，感觉它好像老去了，虽然现在基本没有用到这个工具，硬件需要使用FTP来下载配置文件，于是研究使用了一下，记录了一下使用过程</p>
<h2 id="安装">安装</h2>
<p>在安装前查看是否已安装vsftpd</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback"># 查看是否已安装 方法一
[root@localhost ~]# rpm -q vsftpd
vsftpd-3.0.2-21.el7.x86_64

# 查看是否已安装 方法二
[root@localhost ~]# vsftpd -v
vsftpd: version 3.0.2

# 安装 vsftpd
[root@localhost ~]# yum -y install vsftpd
</code></pre></td></tr></table>
</div>
</div><h2 id="查看位置">查看位置</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">[root@localhost ~]# whereis vsftpd
vsftpd: /usr/sbin/vsftpd /etc/vsftpd /usr/share/man/man8/vsftpd.8.gz
</code></pre></td></tr></table>
</div>
</div><h2 id="启动vsftpd服务">启动vsftpd服务</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">systemctl start vsftpd.service
</code></pre></td></tr></table>
</div>
</div><h2 id="关闭firewall和selinux">关闭firewall和SELinux</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">setenforce 0   # 设置SELinux 成为permissive模式  （关闭SELinux）
setenforce 1   # 设置SELinux 成为enforcing模式   （开启SELinux）

# 或者修改配置
vi /etc/selinux/config
# SELINUX=enforcing
# 注释掉
# SELINUXTYPE=targeted
# 注释掉
SELINUX=disabled
# 增加
:wq! #保存退出
setenforce 0
</code></pre></td></tr></table>
</div>
</div><p>或者设置SELinux</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">
getsebool -a | grep ftp
setsebool -P ftpd_full_access on
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">systemctl stop firewalld.service
#停止firewall
systemctl disable firewalld.service
#禁止firewall开机启动
</code></pre></td></tr></table>
</div>
</div><p>如果你不愿意关闭防火墙，需要防火墙添加FTP服务。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">firewall-cmd --permanent --zone=public --add-service=ftp
firewall-cmd --reload
</code></pre></td></tr></table>
</div>
</div><h2 id="修改配置文件">修改配置文件</h2>
<p>配置文件<code>/etc/vsftpd/vsftpd.conf</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">anonymous_enable=NO        # 不允许匿名访问，禁用匿名登录
chroot_local_user=YES      # 启用限定用户在其主目录下
use_localtime=YES          # 使用本地时(自行添加)
chroot_list_enable=YES
local_enable=YES           # 允许使用本地帐户进行FTP用户登录验证
allow_writeable_chroot=YES # 如果启用了限定用户在其主目录下需要添加这个配置，解决报错 500 OOPS: vsftpd: refusing to run with writable root inside chroot()
xferlog_enable=YES         # 启用上传和下载的日志功能，默认开启。
local_umask=022            # 设置本地用户默认文件掩码022
# FTP上本地的文件权限，默认是077，不过vsftpd安装后的配置文件里默认是022
</code></pre></td></tr></table>
</div>
</div><p>虚拟用户高级参数</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">当virtual_use_local_privs=YES 时，虚拟用户和本地用户有相同的权限；
当virtual_use_local_privs=NO  时，虚拟用户和匿名用户有相同的权限，默认是NO。
当virtual_use_local_privs=YES，write_enable=YES时，虚拟用户具有写权限（上传、下载、删除、重命名）。
当virtual_use_local_privs=NO，write_enable=YES，anon_world_readable_only=YES，
anon_upload_enable=YES时，虚拟用户不能浏览目录，只能上传文件，无其他权限。
当virtual_use_local_privs=NO，write_enable=YES，anon_world_readable_only=NO，
anon_upload_enable=NO时，虚拟用户只能下载文件，无其他权限。
当virtual_use_local_privs=NO，write_enable=YES，anon_world_readable_only=NO，
anon_upload_enable=YES时，虚拟用户只能上传和下载文件，无其他权限。
当virtual_use_local_privs=NO，write_enable=YES，anon_world_readable_only=NO，
anon_mkdir_write_enable=YES时，虚拟用户只能下载文件和创建文件夹，无其他权限。
当virtual_use_local_privs=NO，write_enable=YES，anon_world_readable_only=NO，
anon_other_write_enable=YES时，虚拟用户只能下载、删除和重命名文件，无其他权限。
</code></pre></td></tr></table>
</div>
</div><h2 id="匿名登录">匿名登录</h2>
<p>安装完默认情况下是开启匿名登录的，对应的是 <code>/var/ftp</code> 目录，这时只要服务启动了，就可以直接连上FTP了。默认用户名是<code>ftp</code>，密码是空的。如果你在配置里面配置了<code>anonymous_enable=NO</code>，匿名就无法登录。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">$ ftp 192.168.188.114

Connected to 192.168.188.114.
220 (vsFTPd 3.0.2)
Name (192.168.188.114:kennywang): ftp
331 Please specify the password.
Password:
230 Login successful.
Remote system type is UNIX.
Using binary mode to transfer files.
ftp&gt; ls
229 Entering Extended Passive Mode (|||47867|).
150 Here comes the directory listing.
-rw-r--r--    1 0        0              12 Jan 18 06:31 README.md
drwxr-xr-x    2 0        0               6 Nov 05 19:43 pub
226 Directory send OK.
</code></pre></td></tr></table>
</div>
</div><h2 id="多用户配置">多用户配置</h2>
<p>多用户配置需要自己手工添加配置，下面内容到vsftpd.conf末尾</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">#
#

use_localtime=YES          # 使用本地时(自行添加)
listen_port=21
chroot_local_user=YES      # 启用限定用户在其主目录下
idle_session_timeout=300

data_connection_timeout=120  # 数据连接超时时间
guest_enable=YES             # 设定启用虚拟用户功能
guest_username=ftpuser       # 指定虚拟用户的宿主用户 ftpuser（就是我们后面会新建这个用户）
# guest_username=www
# 如果ftp目录是指向网站根目录，用来上传网站程序，
# 可以指定虚拟用户的宿主用户为nginx运行账户www，可以避免很多权限设置问题

user_config_dir=/etc/vsftpd/vuser_conf   # 虚拟用户配置文件目录
virtual_use_local_privs=YES # NO时，虚拟用户和匿名用户有相同的权限，默认是NO

pasv_min_port=10060         # 被动模式最小端口号10060
pasv_max_port=10090         # 被动模式最大端口号10090

accept_timeout=5
connect_timeout=1
</code></pre></td></tr></table>
</div>
</div><h3 id="创建宿主用户">创建宿主用户</h3>
<p>新建系统用户ftpuser，用户目录为<code>/home/vsftpd</code>, 用户登录终端设为/bin/false(即使之不能登录系统)</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback"># 方法一
# 创建用户 ftpuser 指定 `/home/vsftpd` 目录
useradd -g root -M -d /home/vsftpd -s /sbin/nologin ftpuser

# 设置用户 ftpuser 的密码
passwd ftpuser
# 把 /home/vsftpd 的所有权给ftpuser.root
chown -R ftpuser.root /home/vsftpd

# 方法二
useradd ftpuser -d /home/vsftpd -s /bin/false
chown ftpuser:ftpuser /home/vsftpd -R

# 如果虚拟用户的宿主用户为www，需要这样设置
# www目录是你应用的目录
chown www:www /home/www -R
</code></pre></td></tr></table>
</div>
</div><p>删除用户 <code>userdel ftpuser</code></p>
<h3 id="建立虚拟用户文件">建立虚拟用户文件</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">touch /etc/vsftpd/vuser_passwd
# 编辑虚拟用户名单文件：（
# 第一行账号，第二行密码，注意：不能使用root做用户名，系统保留）
vi /etc/vsftpd/vuser_passwd
# 编辑内容，下面是 vuser_passwd 内容
wcj
123456
hss
123456
#保存退出
</code></pre></td></tr></table>
</div>
</div><h3 id="生成虚拟用户数据文件">生成虚拟用户数据文件</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">db_load -T -t hash -f /etc/vsftpd/vuser_passwd /etc/vsftpd/vuser_passwd.db
chmod 600 /etc/vsftpd/vuser_passwd.db
</code></pre></td></tr></table>
</div>
</div><h3 id="创建用户配置">创建用户配置</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">mkdir /etc/vsftpd/vuser_conf  # 建立虚拟用户个人vsftp的配置文件
cd /etc/vsftpd/vuser_conf     # 进入目录
touch hss wcj                 # 这里创建两个虚拟用户配置文件
</code></pre></td></tr></table>
</div>
</div><p>每一个文件配置文件都差不多，只是参数<code>local_root</code>不一样。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">local_root=/home/vsftpd/hss   # 用户 hss 配置目录，这个地方不一样
write_enable=YES              # 允许本地用户对FTP服务器文件具有写权限
anon_world_readable_only=NO
anon_upload_enable=YES        # 允许匿名用户上传文件(须将全局的write_enable=YES,默认YES)
anon_mkdir_write_enable=YES   # 允许匿名用户创建目录
anon_other_write_enable=YES   # 允许匿名用户删除和重命名权限(自行添加)
</code></pre></td></tr></table>
</div>
</div><h3 id="创建用户目录">创建用户目录</h3>
<p>每个用户目录文件夹是有root用户创建的，也就是上面<code>local_root</code>配置目录，其权限应设置为755。因为权限的问题在该文件夹内无法直接上传文件。而如果设置为777则无法访问，这是由于vsftpd的安全性设置。解决上传问题的方法是在local_root文件夹内新建一个upload的文件夹，权限设置为777，可将文件上传到该文件夹。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">mkdir -p /home/vsftpd/hss     # 每个用户对于一个目录，创建两个目录“hss”、“wcj”

# 下面是目录结构
/home/vsftpd
      ├── hss
      │   ├── filename.md
      │   └── upload
      └── wcj
          └── filename.md

# 赋予其权限
chmod -R 777 /var/vsftpd/hss/upload/

# 在/var/ftp下新建一个目录来实现匿名用户上传
mkdir /var/ftp/upload
</code></pre></td></tr></table>
</div>
</div><p>vsftpd中几种用户的区分：</p>
<p><strong>本地用户</strong>：用户在FTP服务器拥有账号，且该账号为本地用户的账号，可以通过自己的账号和口令进行授权登录，登录目录为自己的home目录<code>$HOME</code>
<strong>虚拟用户</strong>：用户在FTP服务器上拥有账号，但该账号只能用于文件传输服务。登录目录为某一特定的目录，通常可以上传和下载
<strong>匿名用户</strong>：用户在FTP服务器上没有账号，登录目录为/var/ftp</p>
<h3 id="最后重启vsftpd服务器">最后重启vsftpd服务器</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">systemctl restart vsftpd.service
</code></pre></td></tr></table>
</div>
</div><h2 id="服务运维">服务运维</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">systemctl restart vsftpd.service  # 重启服务
systemctl start vsftpd.service    # 启动服务
systemctl status vsftpd.service   # 服务状态查看
</code></pre></td></tr></table>
</div>
</div><h2 id="ftp命令">FTP命令</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">ftp&gt; ascii  # 设定以ASCII方式传送文件(缺省值)
ftp&gt; bell   # 每完成一次文件传送,报警提示.
ftp&gt; binary # 设定以二进制方式传送文件.
ftp&gt; bye    # 终止主机FTP进程,并退出FTP管理方式.
ftp&gt; case # 当为ON时,用MGET命令拷贝的文件名到本地机器中,全部转换为小写字母.
ftp&gt; cd     # 同UNIX的CD命令.
ftp&gt; cdup   # 返回上一级目录.
ftp&gt; chmod  # 改变远端主机的文件权限.
ftp&gt; close  # 终止远端的FTP进程,返回到FTP命令状态, 所有的宏定义都被删除.
ftp&gt; delete # 删除远端主机中的文件.
ftp&gt; dir [remote-directory] [local-file] # 列出当前远端主机目录中的文件.如果有本地文件,就将结果写至本地文件.
ftp&gt; get [remote-file] [local-file] # 从远端主机中传送至本地主机中.
ftp&gt; help [command] # 输出命令的解释.
ftp&gt; lcd # 改变当前本地主机的工作目录,如果缺省,就转到当前用户的HOME目录.
ftp&gt; ls [remote-directory] [local-file] # 同DIR.
ftp&gt; macdef                 # 定义宏命令.
ftp&gt; mdelete [remote-files] # 删除一批文件.
ftp&gt; mget [remote-files]    # 从远端主机接收一批文件至本地主机.
ftp&gt; mkdir directory-name   # 在远端主机中建立目录.
ftp&gt; mput local-files # 将本地主机中一批文件传送至远端主机.
ftp&gt; open host [port] # 重新建立一个新的连接.
ftp&gt; prompt           # 交互提示模式.
ftp&gt; put local-file [remote-file] # 将本地一个文件传送至远端主机中.
ftp&gt; pwd  # 列出当前远端主机目录.
ftp&gt; quit # 同BYE.
ftp&gt; recv remote-file [local-file] # 同GET.
ftp&gt; rename [from] [to]     # 改变远端主机中的文件名.
ftp&gt; rmdir directory-name   # 删除远端主机中的目录.
ftp&gt; send local-file [remote-file] # 同PUT.
ftp&gt; status   # 显示当前FTP的状态.
ftp&gt; system   # 显示远端主机系统类型.
ftp&gt; user user-name [password] [account] # 重新以别的用户名登录远端主机.
ftp&gt; ? [command] # 同HELP. [command]指定需要帮助的命令名称。如果没有指定 command，ftp 将显示全部命令的列表。
ftp&gt; ! # 从 ftp 子系统退出到外壳。
</code></pre></td></tr></table>
</div>
</div><h3 id="关闭ftp连接">关闭FTP连接</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">bye
exit
quit
</code></pre></td></tr></table>
</div>
</div><h3 id="下载文件">下载文件</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">ftp&gt; get readme.txt # 下载 readme.txt 文件
ftp&gt; mget *.txt     # 下载
</code></pre></td></tr></table>
</div>
</div><h3 id="上传文件">上传文件</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">ftp&gt; put /path/readme.txt # 上传 readme.txt 文件
ftp&gt; mput *.txt           # 可以上传多个文件
</code></pre></td></tr></table>
</div>
</div><h2 id="状态码">状态码</h2>
<ul>
<li>
<p>230 - 登录成功</p>
</li>
<li>
<p>200 - 命令执行成功</p>
</li>
<li>
<p>150 - 文件状态正常，开启数据连接端口</p>
</li>
<li>
<p>250 - 目录切换操作完成</p>
</li>
<li>
<p>226 - 关闭数据连接端口，请求的文件操作成功</p>
</li>
</ul>
<p>#################################################</p>
<h1 id="ftp简单图文设置如下">FTP简单图文设置如下:</h1>
<h1 id="1-概述">1 概述</h1>
<p>文章主要讲了CentOS8如何利用vsftpd搭建一个FTP服务器,然后进行简单的匿名上传/下载与用户上传/下载测试,还有使用了wget测试.</p>
<h1 id="2-安装vsftpd">2 安装vsftpd</h1>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">yum install -y vsftpd
</code></pre></td></tr></table>
</div>
</div><h1 id="3-开启服务">3 开启服务</h1>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">service httpd start
</code></pre></td></tr></table>
</div>
</div><h1 id="4-设置开机启动">4 设置开机启动</h1>
<p>可以用</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">systemctl list-unit-files | grep vsftpd
</code></pre></td></tr></table>
</div>
</div><p>查看是否开机启动.显示disabled.</p>
<p><img src="https://segmentfault.com/img/remote/1460000021457480" alt="在这里插入图片描述" title="在这里插入图片描述"></p>
<p>通过</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">chkconfig vsftpd on
</code></pre></td></tr></table>
</div>
</div><p>开启自启,再次执行systemctl,可以看到变成了enabled.</p>
<h1 id="5-修改etcvsftpdvsftpdconf">5 修改/etc/vsftpd/vsftpd.conf</h1>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">sudo vim /etc/vsftpd/vsftpd.conf
</code></pre></td></tr></table>
</div>
</div><p>首先修改</p>
<p><img src="https://segmentfault.com/img/remote/1460000021457483" alt="在这里插入图片描述" title="在这里插入图片描述"></p>
<p>为YES.</p>
<p>再添加一行anon_upload_enable=YES</p>
<p><img src="https://segmentfault.com/img/remote/1460000021457481" alt="在这里插入图片描述" title="在这里插入图片描述"></p>
<p>第一行的意思是允许匿名登录,第二行的意思是允许匿名上传.
重启服务.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">service vsftpd restart
</code></pre></td></tr></table>
</div>
</div><h1 id="6-创建测试文件">6 创建测试文件</h1>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">cd /var/ftp/pub
sudo vim test
</code></pre></td></tr></table>
</div>
</div><p><img src="https://segmentfault.com/img/remote/1460000021457482" alt="在这里插入图片描述" title="在这里插入图片描述"></p>
<h1 id="7-测试">7 测试</h1>
<h2 id="71-浏览器测试">7.1 浏览器测试</h2>
<h3 id="711-匿名测试">7.1.1 匿名测试</h3>
<p>ifconfig获取内网ip,在浏览器中输入ftp://ip.</p>
<p><img src="https://segmentfault.com/img/remote/1460000021457488" alt="在这里插入图片描述" title="在这里插入图片描述"></p>
<p>可以看到有一个pub文件夹,里面有刚才新建的test文件.</p>
<p><img src="https://segmentfault.com/img/remote/1460000021457486" alt="在这里插入图片描述" title="在这里插入图片描述"></p>
<p><img src="https://segmentfault.com/img/remote/1460000021457484" alt="在这里插入图片描述" title="在这里插入图片描述"></p>
<p>右键保存即可下载文件.</p>
<p><img src="https://segmentfault.com/img/remote/1460000021457494" alt="在这里插入图片描述" title="在这里插入图片描述"></p>
<p>下载完成.</p>
<p><img src="https://segmentfault.com/img/remote/1460000021457499" alt="在这里插入图片描述" title="在这里插入图片描述"></p>
<p>去终端看看.</p>
<p><img src="https://segmentfault.com/img/remote/1460000021457485" alt="在这里插入图片描述" title="在这里插入图片描述"></p>
<h3 id="712-用户登录测试">7.1.2 用户登录测试</h3>
<p>输入</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">ftp://username@ip
</code></pre></td></tr></table>
</div>
</div><p><img src="https://segmentfault.com/img/remote/1460000021457487" alt="在这里插入图片描述" title="在这里插入图片描述"></p>
<p>再输入用户密码.</p>
<p>默认访问的是用户根目录下的文件,这里显示出来了.</p>
<p><img src="https://segmentfault.com/img/remote/1460000021457498" alt="在这里插入图片描述" title="在这里插入图片描述"></p>
<p>下载的话同上,右键选择即可.</p>
<h2 id="72-ftp命令测试">7.2 ftp命令测试</h2>
<p>首先安装ftp:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">sudo yum install ftp
</code></pre></td></tr></table>
</div>
</div><h3 id="721-匿名测试">7.2.1 匿名测试</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">ftp ip
</code></pre></td></tr></table>
</div>
</div><p>这里用户名选择ftp,密码为空,表示匿名登录.ftp为默认的匿名登录用户名,至于密码,可以在/etc/vsftpd/vsftpd.conf中设置一个</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">no_anon_password=YES
</code></pre></td></tr></table>
</div>
</div><p>这样匿名用户可以不用密码登录.</p>
<p><img src="https://segmentfault.com/img/remote/1460000021457502" alt="在这里插入图片描述" title="在这里插入图片描述"></p>
<h4 id="7211-上传测试">7.2.1.1 上传测试</h4>
<p>直接使用put命令,后面接上文件,这里的upload.txt是执行ftp之前的所在文件夹下的upload.txt</p>
<p><img src="https://segmentfault.com/img/remote/1460000021457489" alt="在这里插入图片描述" title="在这里插入图片描述"></p>
<p>这里提示不能创建文件,是权限的原因,要确保/var/ftp/pub对&quot;other&quot;用户有写权限.</p>
<p><img src="https://segmentfault.com/img/remote/1460000021457490" alt="在这里插入图片描述" title="在这里插入图片描述"></p>
<p>默认的/var/ftp/pub的权限是644,修改成647.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">sudo chmod 647 /var/ftp/pub
</code></pre></td></tr></table>
</div>
</div><p>同时修改上传文件的权限,允许other用户可读.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">sudo chmod 644 /root/upload.txt
</code></pre></td></tr></table>
</div>
</div><p>如果不行,使用selinux设置.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">getsebool -a | grep ftp
</code></pre></td></tr></table>
</div>
</div><p><img src="https://segmentfault.com/img/remote/1460000021457492" alt="在这里插入图片描述" title="在这里插入图片描述"></p>
<p>把ftpd_full_access开启:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">setsebool ftpd_full_access on
</code></pre></td></tr></table>
</div>
</div><p><img src="https://segmentfault.com/img/remote/1460000021457491" alt="在这里插入图片描述" title="在这里插入图片描述"></p>
<p>再进入upload.txt所在的文件夹,执行ftp,再次put.</p>
<p><img src="https://segmentfault.com/img/remote/1460000021457493" alt="在这里插入图片描述" title="在这里插入图片描述"></p>
<p>成功!</p>
<p><img src="https://segmentfault.com/img/remote/1460000021457497" alt="在这里插入图片描述" title="在这里插入图片描述"></p>
<h4 id="7212-下载测试">7.2.1.2 下载测试</h4>
<p>直接get文件即可,由于上面已经设置好了权限,所以不会出现问题.</p>
<p><img src="https://segmentfault.com/img/remote/1460000021457495" alt="在这里插入图片描述" title="在这里插入图片描述"></p>
<p><img src="https://segmentfault.com/img/remote/1460000021457496" alt="在这里插入图片描述" title="在这里插入图片描述"></p>
<p>若出现权限问题可从三方面入手:</p>
<ul>
<li>(1)<strong>/var/ftp/pub的对other用户的可读权限:因为是下载,而且匿名,所以只需要对other用户的可读权限</strong></li>
<li>(2)<strong>被下载文件的对other用户的可读权限</strong></li>
<li>(3)<strong>selinux的问题,设置ftpd_full_access为on</strong></li>
</ul>
<h3 id="722-用户登录测试">7.2.2 用户登录测试</h3>
<p>执行ftp时用对应用户名与密码登录.</p>
<p><img src="https://segmentfault.com/img/remote/1460000021457500" alt="在这里插入图片描述" title="在这里插入图片描述"></p>
<p>默认进入了用户根目录.</p>
<h4 id="7221-上传测试">7.2.2.1 上传测试</h4>
<p>直接put即可.</p>
<p><img src="https://segmentfault.com/img/remote/1460000021457501" alt="在这里插入图片描述" title="在这里插入图片描述"></p>
<p><img src="https://segmentfault.com/img/remote/1460000021457503" alt="在这里插入图片描述" title="在这里插入图片描述"></p>
<p>若出现权限问题参照上面7.2.1.2的那三条方法.</p>
<h4 id="7222-下载测试">7.2.2.2 下载测试</h4>
<p>随便在用户根目录新建一个文件,这里是kr.</p>
<p><img src="https://segmentfault.com/img/remote/1460000021457505" alt="在这里插入图片描述" title="在这里插入图片描述"></p>
<p>直接get即可.</p>
<p><img src="https://segmentfault.com/img/remote/1460000021457504" alt="在这里插入图片描述" title="在这里插入图片描述"></p>
<p><img src="https://segmentfault.com/img/remote/1460000021457506" alt="在这里插入图片描述" title="在这里插入图片描述"></p>
<h2 id="73-wget测试">7.3 wget测试</h2>
<p>wget用来下载文件,初始下载的目录与ftp登录时的目录一致,比如匿名登录ftp,登录的是/var/ftp目录,则wget会从这个/var/ftp目录下载文件,下载到执行wget命令所在的目录.使用用户&quot;kr&quot;登录ftp,则登录的是/home/kr目录,wget会从/home/kr下载文件.</p>
<h3 id="731-匿名测试">7.3.1 匿名测试</h3>
<p>注意,请确保被下载文件对other用户有可读权限.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">sudo chmod o+w xxxxxx
</code></pre></td></tr></table>
</div>
</div><p>然后使用wget</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">wget ftp://ip/pub/xxxx
</code></pre></td></tr></table>
</div>
</div><p><img src="https://segmentfault.com/img/remote/1460000021457507" alt="在这里插入图片描述" title="在这里插入图片描述"></p>
<p><img src="https://segmentfault.com/img/remote/1460000021457508" alt="在这里插入图片描述" title="在这里插入图片描述"></p>
<h3 id="732-用户登录测试">7.3.2 用户登录测试</h3>
<p>使用&ndash;ftp-user,&ndash;ftp-password指定用户名与密码,其余同上.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">wget ftp://ip/xxx --ftp-user=xxxx --ftp-password=xxxx
</code></pre></td></tr></table>
</div>
</div><p><img src="https://segmentfault.com/img/remote/1460000021457509" alt="在这里插入图片描述" title="在这里插入图片描述"></p>
<p>成功.</p>
<h1 id="8-总结">8 总结</h1>
<p>呃&hellip;.简单来说,就是先安装好ftp与vsftpd,然后修改/etc/vsftpd/vsftpd.conf添加相应权限,对于不能上传与下载的原因,基本上都是权限的问题,主要就是三方面:</p>
<ul>
<li><strong>(1)ftp目录的权限:比如可以是/var/ftp/pub没有对应的写权限导致上传失败,没有对应读权限导致下载失败.</strong></li>
<li><strong>(2)被上传文件的权限:比如上传的文件没有读权限导致上传失败.</strong></li>
<li><strong>(3)selinux:使用setsebool设置为on.</strong></li>
</ul>
<p>解决权限问题后,基本就可以通过ftp或wget顺利地使用这个ftp服务器上传/下载文件了.</p>
    </div>

    <div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">文章作者</span>
    <span class="item-content">gzxb0712</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">上次更新</span>
    <span class="item-content">
        2019-12-17 22:21
        
    </span>
  </p>
  
  <p class="copyright-item">
    <span class="item-title">许可协议</span>
    <span class="item-content"><a target="_blank" rel="license noopener" href="https://github.com/gzxb0712/blog/blob/master/LICENSE">MIT</a></span>
  </p>
</div>
<div class="post-reward">
  <input type="checkbox" name="reward" id="reward" hidden />
  <label class="reward-button" for="reward">赞赏支持</label>
  <div class="qr-code">
    
    <label class="qr-code-image" for="reward">
        <img class="image" src="/images/wechat.png">
        <span>微信佛系打赏</span>
      </label>
    <label class="qr-code-image" for="reward">
        <img class="image" src="/images/alipay.jpg">
        <span>支付宝佛系打赏</span>
      </label>
  </div>
</div><footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/ftp/">ftp</a>
          <a href="/tags/centos/">centos</a>
          </div>
      <nav class="post-nav">
        
        <a class="next" href="/post/dns_centos_install/">
            <span class="next-text nav-default">dns在centos中安装</span>
            <span class="next-text nav-mobile">下一篇</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="http://www.cnblogs.com/gzxb0712" class="iconfont icon-cnblogs" title="cnblogs"></a>
      <a href="mailto:gzxb0712@qq.com" class="iconfont icon-email" title="email"></a>
      <a href="https://github.com/gzxb0712" class="iconfont icon-github" title="github"></a>
      <a href="https://juejin.im/user/59aeb829f265da249960595a" class="iconfont icon-juejin" title="juejin"></a>
      <a href="https://www.v2ex.com/member/gzxb0712" class="iconfont icon-v2ex" title="v2ex"></a>
  <a href="https://xiebiao.top/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    由 <a class="hexo-link" href="https://gohugo.io">Hugo</a> 强力驱动
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    主题 - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  <div class="busuanzi-footer">
    <span id="busuanzi_container_site_pv"> 本站总访问量 <span id="busuanzi_value_site_pv"><img src="/img/spinner.svg" alt="spinner.svg"/></span> 次 </span>
      <span class="division">|</span>
    <span id="busuanzi_container_site_uv"> 本站总访客数 <span id="busuanzi_value_site_uv"><img src="/img/spinner.svg" alt="spinner.svg"/></span> 人 </span>
  </div>

  <span class="copyright-year">
    &copy; 
    2019 - 
    2020
    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">gzxb0712</span>
  </span>
</div>
    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/timeago.js@3.0.2/dist/timeago.min.js" integrity="sha256-jwCP0NAdCBloaIWTWHmW4i3snUNMHUNO+jr9rYd2iOI=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/timeago.js@3.0.2/dist/timeago.locales.min.js" integrity="sha256-ZwofwC1Lf/faQCzN7nZtfijVV6hSwxjQMwXL4gn9qU8=" crossorigin="anonymous"></script>
  <script><!-- NOTE: timeago.js uses the language code format like "zh_CN" (underscore and case sensitive) -->
    var languageCode = "zh-CN".replace(/-/g, '_').replace(/_(.*)/, function ($0, $1) {return $0.replace($1, $1.toUpperCase());});
    timeago().render(document.querySelectorAll('.timeago'), languageCode);
    timeago.cancel();  
  </script>



<script type="text/javascript" src="/js/main.min.d7b7ada643c9c1a983026e177f141f7363b4640d619caf01d8831a6718cd44ea.js"></script>


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-138883536-1', 'auto');
	ga('set', 'anonymizeIp', true);
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>







</body>
</html>
