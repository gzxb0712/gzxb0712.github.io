<!DOCTYPE html>
<html lang="zh-cn">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Linux文本三剑客---grep、sed、awk - Bill World</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="gzxb0712" /><meta name="description" content="awk、grep、sed是linux操作文本的三大利器，合称文本三剑客，也是必须掌握的linux命令之一。三者的功能都是处理文本，但侧重点各" /><meta name="keywords" content="Mac, Github, Vue, React, Front End" />






<meta name="generator" content="Hugo 0.74.3 with theme even" />


<link rel="canonical" href="https://xiebiao.top/post/shell/sed_awk_doc/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">

<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<link href="/sass/main.min.651e6917abb0239242daa570c2bec9867267bbcd83646da5a850afe573347b44.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">
<link rel="stylesheet" href="/css/reset-even.css">


<meta property="og:title" content="Linux文本三剑客---grep、sed、awk" />
<meta property="og:description" content="awk、grep、sed是linux操作文本的三大利器，合称文本三剑客，也是必须掌握的linux命令之一。三者的功能都是处理文本，但侧重点各" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://xiebiao.top/post/shell/sed_awk_doc/" />
<meta property="article:published_time" content="2020-08-17T21:01:30+00:00" />
<meta property="article:modified_time" content="2020-08-17T21:01:30+00:00" />
<meta itemprop="name" content="Linux文本三剑客---grep、sed、awk">
<meta itemprop="description" content="awk、grep、sed是linux操作文本的三大利器，合称文本三剑客，也是必须掌握的linux命令之一。三者的功能都是处理文本，但侧重点各">
<meta itemprop="datePublished" content="2020-08-17T21:01:30+00:00" />
<meta itemprop="dateModified" content="2020-08-17T21:01:30+00:00" />
<meta itemprop="wordCount" content="10876">



<meta itemprop="keywords" content="bash,shell," />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Linux文本三剑客---grep、sed、awk"/>
<meta name="twitter:description" content="awk、grep、sed是linux操作文本的三大利器，合称文本三剑客，也是必须掌握的linux命令之一。三者的功能都是处理文本，但侧重点各"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">Bill World</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">首页</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">归档</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">分类</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">标签</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">关于我</li>
      </a>
  </ul>
</nav>
  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">Bill World</a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">首页</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">归档</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">分类</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">标签</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">关于我</a>
      </li>
  </ul>
</nav>
    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">Linux文本三剑客---grep、sed、awk</h1>

      <div class="post-meta">
        <span class="post-time"> 2020-08-17 21:01 </span>
        <div class="post-category">
            <a href="/categories/shell/"> shell </a>
            </div>
          <span class="more-meta"> 约 10876 字 </span>
          <span class="more-meta"> 预计阅读 22 分钟 </span>
        <span id="busuanzi_container_page_pv" class="more-meta"> <span id="busuanzi_value_page_pv"><img src="/img/spinner.svg" alt="spinner.svg"/></span> 次阅读 </span>
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">文章目录</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#1grep">1、grep</a>
      <ul>
        <li><a href="#11-什么是grep和egrep"><strong>1.1 什么是grep和egrep</strong></a></li>
        <li><a href="#12-使用grep"><strong>1.2 使用grep</strong></a></li>
        <li><a href="#13-grep实战演示"><strong>1.3 grep实战演示</strong></a></li>
      </ul>
    </li>
    <li><a href="#2正则表达式"> 2、正则表达式</a>
      <ul>
        <li><a href="#21-认识正则"><strong>2.1 认识正则</strong></a></li>
        <li><a href="#22-基本正则表达式"><strong>2.2 基本正则表达式</strong></a></li>
        <li><a href="#23-扩展正则表达式"><strong>2.3 扩展正则表达式</strong></a></li>
      </ul>
    </li>
    <li><a href="#3sed">3、sed</a>
      <ul>
        <li><a href="#31-认识sed"><strong>3.1 认识sed</strong></a></li>
        <li><a href="#32-使用sed"><strong>3.2 使用sed</strong></a></li>
        <li><a href="#33-sed用法演示"><strong>3.3 sed用法演示</strong></a></li>
        <li><a href="#34-sed高级编辑命令"><strong>3.4 sed高级编辑命令</strong></a></li>
        <li><a href="#41-认识awk"><strong>4.1 认识awk</strong></a></li>
        <li><a href="#42-使用awk"><strong>4.2 使用awk</strong></a></li>
        <li><a href="#43-awk变量"><strong>4.3 awk变量</strong></a></li>
        <li><a href="#44-printf命令"><strong>4.4 printf命令</strong></a></li>
        <li><a href="#45-操作符"><strong>4.5 操作符</strong></a></li>
        <li><a href="#46-awk-pattern-匹配部分"><strong>4.6 awk PATTERN 匹配部分</strong></a></li>
        <li><a href="#47-awk有意思的案例"><strong>4.7 awk有意思的案例</strong></a></li>
        <li><a href="#51-awk控制语句if-else判断"><strong>5.1 awk控制语句—if-else判断</strong></a></li>
        <li><a href="#52-awk控制语句while循环"><strong>5.2 awk控制语句—while循环</strong></a></li>
        <li><a href="#53-awk控制语句do-while循环"><strong>5.3 awk控制语句—do-while循环</strong></a></li>
        <li><a href="#54-awk控制语句for循环"><strong>5.4 awk控制语句—for循环</strong></a></li>
        <li><a href="#55-和shell脚本中较相似的控制语句"><strong>5.5 和shell脚本中较相似的控制语句</strong></a></li>
        <li><a href="#56-awk数组"><strong>5.6 awk数组</strong></a></li>
        <li><a href="#57-awk自定义函数"><strong>5.7 awk自定义函数</strong></a></li>
        <li><a href="#58-awk中调用shell-命令"><strong>5.8 awk中调用shell 命令</strong></a></li>
      </ul>
    </li>
    <li><a href="#6grep-awk-sed对比">6、grep awk sed对比</a></li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<p>　　awk、grep、sed是linux操作文本的三大利器，合称文本三剑客，也是必须掌握的linux命令之一。三者的功能都是处理文本，但侧重点各不相同，其中属awk功能最强大，但也最复杂。grep更适合单纯的查找或匹配文本，sed更适合编辑匹配到的文本，awk更适合格式化文本，对文本进行较复杂格式处理。</p>
<h2 id="1grep">1、grep</h2>
<h3 id="11-什么是grep和egrep"><strong>1.1 什么是grep和egrep</strong></h3>
<p>　　Linux系统中grep命令是一种强大的文本搜索工具，它能使用<strong>正则表达式</strong>搜索文本，并把匹配的行打印出来（匹配到的标红）。grep全称是Global Regular Expression Print，表示全局正则表达式版本，它的使用权限是所有用户。</p>
<p>　　grep的工作方式是这样的，它在一个或多个文件中搜索字符串模板。如果模板包括空格，则必须被引用，模板后的所有字符串被看作文件名。搜索的结果被送到标准输出，不影响原文件内容。</p>
<p>　　grep可用于shell脚本，因为grep通过返回一个状态值来说明搜索的状态，如果模板搜索成功，则返回0，如果搜索不成功，则返回1，如果搜索的文件不存在，则返回2。我们利用这些返回值就可进行一些自动化的文本处理工作。</p>
<p>**　　egrep = grep -E：扩展的正则表达式** （除了**&lt; , &gt; , b** 使用其他正则都可以去掉）</p>
<h3 id="12-使用grep"><strong>1.2 使用grep</strong></h3>
<h4 id="121-命令格式"><strong>1.2.1 命令格式</strong></h4>
<p>grep [option] pattern file</p>
<h4 id="122-命令功能"><strong>1.2.2 命令功能</strong></h4>
<p>用于过滤/搜索的特定字符。可使用正则表达式能多种命令配合使用，使用上十分灵活。</p>
<h4 id="123-命令参数"><strong>1.2.3 命令参数</strong></h4>
<p>常用参数已加粗</p>
<ul>
<li> -A&lt;显示行数&gt;：除了显示符合范本样式的那一列之外，并显示该行之后的内容。</li>
<li> -B&lt;显示行数&gt;：除了显示符合样式的那一行之外，并显示该行之前的内容。</li>
<li> -C&lt;显示行数&gt;：除了显示符合样式的那一行之外，并显示该行之前后的内容。</li>
<li> -c：统计匹配的行数</li>
<li> <strong>-e ：实现多个选项间的逻辑or 关系</strong></li>
<li> <strong>-E：扩展的正则表达式</strong></li>
<li> -f FILE：从FILE获取PATTERN匹配</li>
<li> -F ：相当于fgrep</li>
<li> -i &ndash;ignore-case #忽略字符大小写的差别。</li>
<li> -n：显示匹配的行号</li>
<li> -o：仅显示匹配到的字符串</li>
<li> -q： 静默模式，不输出任何信息</li>
<li> -s：不显示错误信息。</li>
<li> <strong>-v：显示不被pattern 匹配到的行，相当于[^] 反向匹配</strong></li>
<li> -w ：匹配 整个单词</li>
</ul>
<h3 id="13-grep实战演示"><strong>1.3 grep实战演示</strong></h3>
<p><img src="https://img2018.cnblogs.com/blog/1216496/201902/1216496-20190213110803311-1918968372.png" alt=""></p>
<h2 id="2正则表达式"> 2、正则表达式</h2>
<h3 id="21-认识正则"><strong>2.1 认识正则</strong></h3>
<p>（1）介绍</p>
<p>　　正则表达式应用广泛，在绝大多数的编程语言都可以完美应用，在Linux中，也有着极大的用处。</p>
<p>　　使用正则表达式，可以有效的筛选出需要的文本，然后结合相应的支持的工具或语言，完成任务需求。</p>
<p>　　在本篇博客中，我们使用grep/egrep来完成对正则表达式的调用</p>
<p>（2）正则表达式类型</p>
<p>正则表达式可以使用正则表达式引擎实现，正则表达式引擎是解释正则表达式模式并使用这些模式匹配文本的基础软件。</p>
<p>在Linux中，常用的正则表达式有：</p>
<ul>
<li> POSIX 基本正则表达式（BRE）引擎</li>
<li> POSIX 扩展正则表达式（BRE）引擎</li>
</ul>
<h3 id="22-基本正则表达式"><strong>2.2 基本正则表达式</strong></h3>
<h4 id="221-匹配字符"><strong>2.2.1 匹配字符</strong></h4>
<p>（1）格式</p>
<ul>
<li> . 匹配任意单个字符，不能匹配空行</li>
<li>  [] 匹配指定范围内的任意单个字符</li>
<li>  [^] 取反</li>
<li>  [:alnum:] 或 [0-9a-zA-Z]</li>
<li>  [:alpha:] 或 [a-zA-Z]</li>
<li>  [:upper:] 或 [A-Z]</li>
<li>  [:lower:] 或 [a-z]</li>
<li>  [:blank:] 空白字符（空格和制表符）</li>
<li>  [:space:] 水平和垂直的空白字符（比[:blank:]包含的范围广）</li>
<li>  [:cntrl:] 不可打印的控制字符（退格、删除、警铃&hellip;）</li>
<li>  [:digit:] 十进制数字 或[0-9]</li>
<li>  [:xdigit:]十六进制数字</li>
<li>  [:graph:] 可打印的非空白字符</li>
<li>  [:print:] 可打印字符</li>
<li>  [:punct:] 标点符号</li>
</ul>
<p>（2）演示</p>
<p><img src="https://img2018.cnblogs.com/blog/1216496/201902/1216496-20190213090042125-2109800404.png" alt=""></p>
<h4 id="222-配置次数"><strong>2.2.2 配置次数</strong></h4>
<p>（1）格式</p>
<ul>
<li> ***  **匹配前面的字符任意次，<strong>包括0次</strong>，贪婪模式：尽可能长的匹配</li>
<li> <strong>.</strong>*  任意长度的任意字符，**不包括0次**</li>
<li> <strong>?  <strong>匹配其前面的字符</strong>0 或 1次</strong></li>
<li> <strong>+</strong>  匹配其前面的字符<strong>至少1次</strong></li>
<li> {n}  匹配前面的字符n次</li>
<li> {m,n}  匹配前面的字符至少m 次，至多n次</li>
<li> {,n}  匹配前面的字符至多n次</li>
<li> {n,}  匹配前面的字符至少n次</li>
</ul>
<p>（2）演示</p>
<p><img src="https://img2018.cnblogs.com/blog/1216496/201902/1216496-20190213090101899-1965232897.png" alt=""></p>
<h4 id="223-位置锚定定位出现的位置"><strong>2.2.3 位置锚定：定位出现的位置</strong></h4>
<p>（1）格式</p>
<ul>
<li> ^  行首锚定，用于模式的最左侧</li>
<li> $  行尾锚定，用于模式的最右侧</li>
<li> ^PATTERN$，用于模式匹配整行</li>
<li> ^$ 空行</li>
<li> ^[[:space:]].*$  空白行</li>
<li> &lt; 或 b  词首锚定，用于单词模式的左侧</li>
<li> &gt; 或 b  词尾锚定；用于单词模式的右侧</li>
<li> <!-- raw HTML omitted --></li>
</ul>
<p>（2）演示</p>
<p><img src="https://img2018.cnblogs.com/blog/1216496/201902/1216496-20190213090122106-1784095099.png" alt=""></p>
<h4 id="224-分组和后向引用"><strong>2.2.4 分组和后向引用</strong></h4>
<p>（1）格式</p>
<p>① 分组：() 将一个或多个字符捆绑在一起，当作一个整体进行处理</p>
<p>　　分组括号中的模式匹配到的内容会被正则表达式引擎记录于内部的变量中，这些变量的命名方式为: 1, 2, 3, &hellip;</p>
<p>② 后向引用</p>
<p>引用前面的分组括号中的模式所匹配字符，而非模式本身</p>
<p>1 表示从左侧起第一个左括号以及与之匹配右括号之间的模式所匹配到的字符</p>
<p>2 表示从左侧起第2个左括号以及与之匹配右括号之间的模式所匹配到的字符，以此类推</p>
<p>&amp; 表示前面的分组中所有字符</p>
<p>③ 流程分析如下：</p>
<p><img src="https://img2018.cnblogs.com/blog/1216496/201902/1216496-20190213090906435-1889784692.png" alt=""></p>
<p>（2）演示</p>
<p><img src="https://img2018.cnblogs.com/blog/1216496/201902/1216496-20190213090916442-579082373.png" alt=""></p>
<h3 id="23-扩展正则表达式"><strong>2.3 扩展正则表达式</strong></h3>
<p>（1）字符匹配：</p>
<ul>
<li> .  任意单个字符</li>
<li> []  指定范围的字符</li>
<li> [^] 不在指定范围的字符</li>
<li>   次数匹配：</li>
<li> * ：匹配前面字符任意次</li>
<li> ?  : 0 或1次</li>
<li> + ：1 次或多次</li>
<li> {m} ：匹配m次 次</li>
<li> {m,n} ：至少m ，至多n次</li>
</ul>
<p>（2）位置锚定：</p>
<ul>
<li> ^ : 行首</li>
<li> $ : 行尾</li>
<li> &lt;, b : 语首</li>
<li> &gt;, b : 语尾</li>
<li>   分组：()</li>
<li> 后向引用：1, 2, &hellip;</li>
</ul>
<p>（3）总结</p>
<p>　　除了&lt;, b : 语首、&gt;, b : 语尾；使用其他正则都可以去掉；上面有演示案例，不在进行演示</p>
<h2 id="3sed">3、sed</h2>
<h3 id="31-认识sed"><strong>3.1 认识sed</strong></h3>
<p>　　sed 是一种流编辑器，它一次处理一<strong>行</strong>内容。处理时，把当前处理的行存储在临时缓冲区中，称为“<strong>模式空间</strong>”（patternspace ），接着用sed 命令处理缓冲区中的内容，处理完成后，把缓冲区的内容送往屏幕。然后读入下行，执行下一个循环。如果没有使诸如‘D’ 的特殊命令，那会在两个循环之间清空模式空间，但不会清空<strong>保留空间</strong>。这样不断重复，直到文件末尾。<strong>文件内容并没有改变</strong>，除非你使用<strong>重定向存储输出或-i</strong>。</p>
<p>　　功能：主要用来自动编辑一个或多个文件, 简化对文件的反复操作</p>
<h3 id="32-使用sed"><strong>3.2 使用sed</strong></h3>
<h4 id="321-命令格式"><strong>3.2.1 命令格式</strong></h4>
<p>sed [options] &lsquo;[地址定界] command&rsquo; file(s)</p>
<h4 id="322-常用选项options"><strong>3.2.2 常用选项options</strong></h4>
<ul>
<li> <strong>-n</strong>：不输出模式空间内容到屏幕，即不自动打印，只打印匹配到的行</li>
<li> **-e：**多点编辑，对每行处理时，可以有多个Script</li>
<li> <strong>-f</strong>：把Script写到文件当中，在执行sed时-f 指定文件路径，如果是多个Script，换行写</li>
<li> <strong>-r</strong>：支持<strong>扩展的正则</strong>表达式</li>
<li> <strong>-i</strong>：直接将处理的结果写入文件</li>
<li> <strong>-i.bak</strong>：在将处理的结果写入文件之前备份一份</li>
</ul>
<h4 id="323-地址定界"><strong>3.2.3 地址定界</strong></h4>
<ul>
<li> 不给地址：对全文进行处理</li>
<li> 单地址：
<ul>
<li> #: 指定的行</li>
<li> /pattern/：被此处模式所能够匹配到的每一行</li>
</ul>
</li>
<li> 地址范围：
<ul>
<li> #,#</li>
<li> #,+#</li>
<li> /pat1/,/pat2/</li>
<li> #,/pat1/</li>
</ul>
</li>
<li> <strong>~：步进</strong>
<ul>
<li>  sed -n**&lsquo;1~2p&rsquo;**  只打印奇数行 （1~2 从第1行，一次加2行）</li>
<li>  sed -n <strong>&lsquo;2~2p&rsquo;</strong>  只打印偶数行</li>
</ul>
</li>
</ul>
<h4 id="324-编辑命令command"><strong>3.2.4 编辑命令command</strong></h4>
<ul>
<li> <strong>d：删除</strong>模式空间匹配的行，并立即启用下一轮循环</li>
<li> <strong>p：打印</strong>当前模式空间内容，追加到默认输出之后</li>
<li> <strong>a</strong>：在指定行<strong>后面追加</strong>文本，支持使用n实现多行追加</li>
<li> <strong>i</strong>：在行<strong>前面插入</strong>文本，支持使用n实现多行追加</li>
<li> <strong>c</strong>：<strong>替换</strong>行为单行或多行文本，支持使用n实现多行追加</li>
<li> w：保存模式匹配的行至指定文件</li>
<li> r：读取指定文件的文本至模式空间中匹配到的行后</li>
<li> =：为模式空间中的行打印行号</li>
<li> <strong>!</strong>：模式空间中匹配行<strong>取反</strong>处理</li>
<li> <strong>s///</strong>：<strong>查找替换</strong>，支持使用其它分隔符，如：s@@@，s###；
<ul>
<li> <strong>加g表示行内全局替换；</strong></li>
<li> 在替换时，可以加一下命令，实现大小写转换</li>
<li> l：把下个字符转换成小写。</li>
<li> L：把replacement字母转换成小写，直到U或E出现。</li>
<li> u：把下个字符转换成大写。</li>
<li> U：把replacement字母转换成大写，直到L或E出现。</li>
<li> E：停止以L或U开始的大小写转换</li>
</ul>
</li>
</ul>
<h3 id="33-sed用法演示"><strong>3.3 sed用法演示</strong></h3>
<h4 id="331-常用选项options演示"><strong>3.3.1 常用选项options演示</strong></h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># cat demo</span> 
aaa
bbbb
AABBCCDD
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># sed &#34;/aaa/p&#34; demo  #匹配到的行会打印一遍，不匹配的行也会打印</span>
aaa
aaa
bbbb
AABBCCDD
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># sed -n &#34;/aaa/p&#34; demo  #-n不显示没匹配的行</span>
aaa
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># sed -e &#34;s/a/A/&#34; -e &#34;s/b/B/&#34; demo  #-e多点编辑</span>
Aaa
Bbbb
AABBCCDD
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># cat sedscript.txt</span> 
s/A/a/g
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># sed -f sedscript.txt demo  #-f使用文件处理</span>
aaa
bbbb
aaBBCCDD
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># sed -i.bak &#34;s/a/A/g&#34; demo  #-i直接对文件进行处理</span>
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># cat demo</span>
AAA
bbbb
AABBCCDD
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># cat demo.bak</span>
aaa
bbbb
AABBCCDD
</code></pre></td></tr></table>
</div>
</div><h4 id="332-地址界定演示"><strong>3.3.2 地址界定演示</strong></h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># cat demo</span>
aaa
bbbb
AABBCCDD
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># sed -n &#34;p&#34; demo  #不指定行，打印全文</span>
aaa
bbbb
AABBCCDD
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># sed &#34;2s/b/B/g&#34; demo  #替换第2行的b-&gt;B</span>
aaa
BBBB
AABBCCDD
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># sed -n &#34;/aaa/p&#34; demo</span>
aaa
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># sed -n &#34;1,2p&#34; demo  #打印1-2行</span>
aaa
bbbb
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># sed -n &#34;/aaa/,/DD/p&#34; demo</span>
aaa
bbbb
AABBCCDD
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># sed -n &#34;2,/DD/p&#34; demo</span>
bbbb
AABBCCDD
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># sed &#34;1~2s/[aA]/E/g&#34; demo  #将奇数行的a或A替换为E</span>
EEE
bbbb
EEBBCCDD
</code></pre></td></tr></table>
</div>
</div><h4 id="333-编辑命令command演示"><strong>3.3.3 编辑命令command演示</strong></h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># cat demo</span>
aaa
bbbb
AABBCCDD
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># sed &#34;2d&#34; demo  #删除第2行</span>
aaa
AABBCCDD
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># sed -n &#34;2p&#34; demo  #打印第2行</span>
bbbb
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># sed &#34;2a123&#34; demo  #在第2行后加123</span>
aaa
bbbb
<span class="m">123</span>
AABBCCDD
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># sed &#34;1i123&#34; demo  #在第1行前加123</span>
<span class="m">123</span>
aaa
bbbb
AABBCCDD
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># sed &#34;3c123n456&#34; demo  #替换第3行内容</span>
aaa
bbbb
<span class="m">123</span>
<span class="m">456</span>
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># sed -n &#34;3w/root/demo3&#34; demo  #保存第3行的内容到demo3文件中</span>
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># cat demo3</span> 
AABBCCDD
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># sed &#34;1r/root/demo3&#34; demo  #读取demo3的内容到第1行后</span>
aaa
AABBCCDD
bbbb
AABBCCDD
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># sed -n &#34;=&#34; demo  #=打印行号</span>
<span class="m">1</span>
<span class="m">2</span>
<span class="m">3</span>
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># sed -n &#39;2!p&#39; demo  #打印除了第2行的内容</span>
aaa
AABBCCDD
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># sed &#39;s@[a-z]@u&amp;@g&#39; demo  #将全文的小写字母替换为大写字母</span>
AAA
BBBB
AABBCCDD
</code></pre></td></tr></table>
</div>
</div><h3 id="34-sed高级编辑命令"><strong>3.4 sed高级编辑命令</strong></h3>
<p>（1）格式</p>
<ul>
<li> h：把模式空间中的内容覆盖至保持空间中</li>
<li> H：把模式空间中的内容追加至保持空间中</li>
<li> g：从保持空间取出数据覆盖至模式空间</li>
<li> G：从保持空间取出内容追加至模式空间</li>
<li> x：把模式空间中的内容与保持空间中的内容进行互换</li>
<li> n：读取匹配到的行的下一行覆盖 至模式空间</li>
<li> N：读取匹配到的行的下一行追加 至模式空间</li>
<li> d：删除模式空间中的行</li>
<li> D：删除 当前模式空间开端至n 的内容（不再传 至标准输出），放弃之后的命令，但是对剩余模式空间重新执行sed</li>
</ul>
<p>（2）一个案例+示意图演示</p>
<p>① 案例：倒序输出文本内容</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># cat num.txt</span> 
One
Two
Three
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># sed &#39;1!G;h;$!d&#39; num.txt</span>
Three
Two
One
</code></pre></td></tr></table>
</div>
</div><p>② 示意图如下：</p>
<p><img src="https://img2018.cnblogs.com/blog/1216496/201902/1216496-20190213091449198-704428171.png" alt=""></p>
<p>③ 总结模式空间与保持空间关系：</p>
<p>保持空间是模式空间一个临时存放数据的缓冲区，协助模式空间进行数据处理</p>
<p>（3）演示</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span><span class="lnt">81
</span><span class="lnt">82
</span><span class="lnt">83
</span><span class="lnt">84
</span><span class="lnt">85
</span><span class="lnt">86
</span><span class="lnt">87
</span><span class="lnt">88
</span><span class="lnt">89
</span><span class="lnt">90
</span><span class="lnt">91
</span><span class="lnt">92
</span><span class="lnt">93
</span><span class="lnt">94
</span><span class="lnt">95
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">① 显示偶数行

<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># seq 9 |sed -n &#39;n;p&#39;</span>
<span class="m">2</span>
<span class="m">4</span>
<span class="m">6</span>
<span class="m">8</span>

② 倒序显示

<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># seq 9 |sed  &#39;1!G;h;$!d&#39;</span>
<span class="m">9</span>
<span class="m">8</span>
<span class="m">7</span>
<span class="m">6</span>
<span class="m">5</span>
<span class="m">4</span>
<span class="m">3</span>
<span class="m">2</span>
<span class="m">1</span>

③ 显示奇数行

<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># seq 9 |sed &#39;H;n;d&#39;</span> 
<span class="m">1</span>
<span class="m">3</span>
<span class="m">5</span>
<span class="m">7</span>
<span class="m">9</span>

④ 显示最后一行

<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># seq 9| sed &#39;N;D&#39;</span>
<span class="m">9</span>

⑤ 每行之间加空行

<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># seq 9 |sed &#39;G&#39;</span>
<span class="m">1</span>

<span class="m">2</span>

<span class="m">3</span>

<span class="m">4</span>

<span class="m">5</span>

<span class="m">6</span>

<span class="m">7</span>

<span class="m">8</span>

<span class="m">9</span>

---

 ⑥ 把每行内容替换成空行

<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># seq 9 |sed &#34;g&#34;</span>









---

 ⑦ 确保每一行下面都有一个空行

<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># seq 9 |sed &#39;/^$/d;G&#39;</span>
<span class="m">1</span>

<span class="m">2</span>

<span class="m">3</span>

<span class="m">4</span>

<span class="m">5</span>

<span class="m">6</span>

<span class="m">7</span>

<span class="m">8</span>

<span class="m">9</span>

4、awk
-----
</code></pre></td></tr></table>
</div>
</div><h3 id="41-认识awk"><strong>4.1 认识awk</strong></h3>
<p>　　awk是一种编程语言，用于在linux/unix下对文本和数据进行处理。数据可以来自标准输入(stdin)、一个或多个文件，或其它命令的输出。它<strong>支持用户自定义函数</strong>和动态正则表达式等先进功能，是linux/unix下的一个强大编程工具。它在命令行中使用，但更多是作为脚本来使用。<strong>awk有很多内建的功能</strong>，比如数组、函数等，这是它和C语言的相同之处，灵活性是awk最大的优势。</p>
<p>　　awk其实不仅仅是工具软件，还是一种编程语言。不过，本文只介绍它的命令行用法，对于大多数场合，应该足够用了。</p>
<h3 id="42-使用awk"><strong>4.2 使用awk</strong></h3>
<h4 id="421-语法"><strong>4.2.1 语法</strong></h4>
<p>awk [options] &lsquo;program&rsquo; var=value file…
awk [options] -f programfile var=value file…
awk [options] &lsquo;BEGIN{ action;… } pattern{ action;… } END{ action;… }&rsquo; file &hellip;</p>
<h4 id="422-常用命令选项"><strong>4.2.2 常用命令选项</strong></h4>
<ul>
<li> -F fs：fs指定输入分隔符，fs可以是字符串或正则表达式，如-F:</li>
<li> -v var=value：赋值一个用户定义变量，将外部变量传递给awk</li>
<li> -f scripfile：从脚本文件中读取awk命令</li>
</ul>
<h3 id="43-awk变量"><strong>4.3 awk变量</strong></h3>
<p>变量：内置和自定义变量，每个变量前加 -v 命令选项</p>
<h4 id="431-内置变量"><strong>4.3.1 内置变量</strong></h4>
<p>（1）格式</p>
<ul>
<li> <strong>FS</strong>：<strong>输入字段分隔符</strong>，<strong>默认为空白字符</strong></li>
<li> <strong>OFS</strong>：<strong>输出字段分隔符</strong>，默认为空白字符</li>
<li> RS ：<strong>输入记录分隔符</strong>，指定输入时的换行符，原换行符仍有效</li>
<li> ORS ：<strong>输出记录分隔符</strong>，输出时用指定符号代替换行符</li>
<li> <strong>NF</strong> ：字段数量，<strong>共有</strong>多少字段，** $NF引用最后一列，$(NF-1)引用倒数第2列**</li>
<li> <strong>NR</strong> ：<strong>行号</strong>，后可跟多个文件，第二个文件行号继续从第一个文件最后行号开始</li>
<li> FNR ：各文件分别计数, 行号，后跟一个文件和NR一样，跟多个文件，第二个文件<strong>行号从1开始</strong></li>
<li> FILENAME ：<strong>当前文件名</strong></li>
<li> ARGC ：<strong>命令行参数</strong>的个数</li>
<li> ARGV ：数组，保存的是命令行所给定的各参数，<strong>查看参数</strong></li>
</ul>
<p>（2）演示</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># cat awkdemo</span> 
hello:world
linux:redhat:lalala:hahaha
along:love:youou
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># awk -v FS=&#39;:&#39; &#39;{print $1,$2}&#39; awkdemo  #FS指定输入分隔符</span>
hello world
linux redhat
along love
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># awk -v FS=&#39;:&#39; -v OFS=&#39;---&#39; &#39;{print $1,$2}&#39; awkdemo  #OFS指定输出分隔符</span>
hello---world
linux---redhat
along---love
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># awk -v RS=&#39;:&#39; &#39;{print $1,$2}&#39; awkdemo</span>
hello 
world linux
redhat 
lalala 
hahaha along
love 
you
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># awk -v FS=&#39;:&#39; -v ORS=&#39;---&#39; &#39;{print $1,$2}&#39; awkdemo</span>
hello world---linux redhat---along love---
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># awk -F: &#39;{print NF}&#39; awkdemo</span>
<span class="m">2</span>
<span class="m">4</span>
<span class="m">3</span>
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># awk -F: &#39;{print $(NF-1)}&#39; awkdemo  #显示倒数第2列</span>
hello
lalala
love
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># awk &#39;{print NR}&#39; awkdemo awkdemo1</span>
<span class="m">1</span>
<span class="m">2</span>
<span class="m">3</span>
<span class="m">4</span>
<span class="m">5</span>
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># awk END&#39;{print NR}&#39; awkdemo awkdemo1</span>
<span class="m">5</span>
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># awk &#39;{print FNR}&#39; awkdemo awkdemo1</span>
<span class="m">1</span>
<span class="m">2</span>
<span class="m">3</span>
<span class="m">1</span>
<span class="m">2</span>
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># awk &#39;{print FILENAME}&#39; awkdemo</span>
awkdemo
awkdemo
awkdemo
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># awk &#39;BEGIN {print ARGC}&#39; awkdemo awkdemo1</span>
<span class="m">3</span>
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># awk &#39;BEGIN {print ARGV[0]}&#39; awkdemo awkdemo1</span>
awk
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># awk &#39;BEGIN {print ARGV[1]}&#39; awkdemo awkdemo1</span>
awkdemo
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># awk &#39;BEGIN {print ARGV[2]}&#39; awkdemo awkdemo1</span>
awkdemo1
</code></pre></td></tr></table>
</div>
</div><h4 id="432-自定义变量"><strong>4.3.2 自定义变量</strong></h4>
<p>自定义变量( 区分字符大小写)</p>
<p>（1）-v var=value</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">① 先定义变量，后执行动作print

<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># awk -v name=&#34;along&#34; -F: &#39;{print name&#34;:&#34;$0}&#39; awkdemo</span>
along:hello:world
along:linux:redhat:lalala:hahaha
along:along:love:you

② 在执行动作print后定义变量

<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># awk -F: &#39;{print name&#34;:&#34;$0;name=&#34;along&#34;}&#39; awkdemo</span>
:hello:world
along:linux:redhat:lalala:hahaha
along:along:love:you

（2）在program 中直接定义

可以把执行的动作放在脚本中，直接调用脚本 -f

<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># cat awk.txt</span>
<span class="o">{</span><span class="nv">name</span><span class="o">=</span><span class="s2">&#34;along&#34;</span><span class="p">;</span>print name,<span class="nv">$1</span><span class="o">}</span>
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># awk -F: -f awk.txt awkdemo</span>
along hello
along linux
along along
</code></pre></td></tr></table>
</div>
</div><h3 id="44-printf命令"><strong>4.4 printf命令</strong></h3>
<p>比print更强大</p>
<h4 id="441-格式"><strong>4.4.1 格式</strong></h4>
<p>（1）格式化输出</p>
<p>printf &ldquo;FORMAT&rdquo;, item1,item2, &hellip;</p>
<p>①  必须指定FORMAT</p>
<p>②  <strong>不会自动换行，需要显式给出换行控制符，n</strong></p>
<p>③  FORMAT 中需要分别为后面每个item 指定格式符</p>
<p>（2）格式符：与item 一一对应</p>
<ul>
<li> %c:  显示字符的ASCII码</li>
<li> %d, %i:  显示十进制整数</li>
<li> %e, %E: 显示科学计数法数值</li>
<li> **%f ：显示为浮点数，小数   **%5.1f，带整数、小数点、整数共5位，小数1位，不够用空格补上</li>
<li> %g, %G ：以科学计数法或浮点形式显示数值</li>
<li> <strong>%s ：显示字符串</strong>；例：%5s最少5个字符，不够用空格补上，超过5个还继续显示</li>
<li> <strong>%u ：无符号整数</strong></li>
<li> %%:  显示% 自身</li>
</ul>
<p>（3）修饰符：放在%c[/d/e/f&hellip;]之间</p>
<ul>
<li> #[.#]：第一个数字控制显示的宽度；第二个# 表示小数点后精度，%5.1f</li>
<li> -：左对齐（<strong>默认右对齐</strong>） %-15s</li>
<li> +：显示数值的正负符号 %+d</li>
</ul>
<h4 id="442-演示"><strong>4.4.2 演示</strong></h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># awk -F: &#39;{print $1,$3}&#39; /etc/passwd</span>
root <span class="m">0</span>
bin <span class="m">1</span>
---第一列显示小于20的字符串；第2列显示整数并换行
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># awk -F: &#39;{printf &#34;%20s---%un&#34;,$1,$3}&#39; /etc/passwd</span>
                root---0
                 bin---1
---使用-进行左对齐；第2列显示浮点数
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># awk -F: &#39;{printf &#34;%-20s---%-10.3fn&#34;,$1,$3}&#39; /etc/passwd</span>
root                ---0.000     
bin                 ---1.000
---使用printf做表格
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># awk -F: &#39;BEGIN{printf &#34;username            useridn-----------------------------n&#34;}{printf &#34;%-20s|%-10.3fn&#34;,$1,$3}&#39; /etc/passwd</span>
username            userid
-----------------------------
root                <span class="p">|</span>0.000     
bin                 <span class="p">|</span>1.000
</code></pre></td></tr></table>
</div>
</div><h3 id="45-操作符"><strong>4.5 操作符</strong></h3>
<h4 id="451-格式"><strong>4.5.1 格式</strong></h4>
<ul>
<li> 算术操作符：
<ul>
<li> x+y, x-y, x*y, x/y, x^y, x%y</li>
<li> -x:  转换为负数</li>
<li> +x:  转换为数值</li>
</ul>
</li>
<li> 字符串操作符：没有符号的操作符，字符串连接</li>
<li> 赋值操作符：
<ul>
<li> =, +=, -=, *=, /=, %=, ^=</li>
<li> ++, &ndash;</li>
</ul>
</li>
<li> 比较操作符：
<ul>
<li> ==, !=, &gt;, &gt;=, &lt;, &lt;=</li>
</ul>
</li>
<li> 模式匹配符：~ ：左边是否和右边匹配包含 !~ ：是否不匹配</li>
<li> 逻辑操作符：与&amp;&amp; ，或|| ，非!</li>
<li> 函数调用： function_name(argu1, argu2, &hellip;)</li>
<li> 条件表达式（三目表达式）：selector**?**if-true-expression**:**if-false-expression
<ul>
<li> 注释：先判断selector，如果符合执行 ? 后的操作；否则执行 : 后的操作</li>
</ul>
</li>
</ul>
<h4 id="452-演示"><strong>4.5.2 演示</strong></h4>
<p>（1）模式匹配符</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">---查询以/dev开头的磁盘信息
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># df -h |awk -F: &#39;$0 ~ /^/dev/&#39;</span>
/dev/mapper/cl-root   17G  7.3G  9.7G  43% /
/dev/sda1           1014M  121M  894M  12% /boot
---只显示磁盘使用状况和磁盘名
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># df -h |awk &#39;$0 ~ /^/dev/{print $(NF-1)&#34;---&#34;$1}&#39;</span>
43%---/dev/mapper/cl-root
12%---/dev/sda1
---查找磁盘大于40%的
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># df -h |awk &#39;$0 ~ /^/dev/{print $(NF-1)&#34;---&#34;$1}&#39; |awk -F% &#39;$1 &gt; 40&#39;</span>
43%---/dev/mapper/cl-root
</code></pre></td></tr></table>
</div>
</div><p>（2）逻辑操作符</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># awk -F: &#39;$3&gt;=0 &amp;&amp; $3&lt;=1000 {print $1,$3}&#39; /etc/passwd</span>
root <span class="m">0</span>
bin <span class="m">1</span>
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># awk -F: &#39;$3==0 || $3&gt;=1000 {print $1}&#39; /etc/passwd</span>
root
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># awk -F: &#39;!($3==0) {print $1}&#39; /etc/passwd</span>
bin
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># awk -F: &#39;!($0 ~ /bash$/) {print $1,$3}&#39; /etc/passwd</span>
bin <span class="m">1</span>
daemon <span class="m">2</span>
</code></pre></td></tr></table>
</div>
</div><p>（3）条件表达式（三目表达式）</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># awk -F: &#39;{$3 &gt;= 1000?usertype=&#34;common user&#34;:usertype=&#34;sysadmin user&#34;;print usertype,$1,$3}&#39; /etc/passwd</span>
sysadmin user root <span class="m">0</span>
common user along <span class="m">1000</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="46-awk-pattern-匹配部分"><strong>4.6 awk PATTERN 匹配部分</strong></h3>
<h4 id="461-格式"><strong>4.6.1 格式</strong></h4>
<p>PATTERN：根据pattern 条件，过滤匹配的行，再做处理</p>
<p>（1）如果未指定：空模式，匹配每一行</p>
<p>（2）/regular expression/ ：仅处理能够模式匹配到的行，<strong>正则</strong>，需要用/ / 括起来</p>
<p>（3）relational expression：<strong>关系表达式，结果为“真”才会被处理</strong></p>
<p>真：结果为非0值，非空字符串</p>
<p>假：结果为空字符串或0值</p>
<p>（4）line ranges：行范围</p>
<p>　　startline(起始行),endline(结束行)：/pat1/,/pat2/  不支持直接给出数字，可以有多段，中间可以有间隔</p>
<p>（5）BEGIN/END 模式</p>
<p>　　BEGIN{}:  仅在开始处理文件中的文本之前执行一次</p>
<p>　　END{} ：仅在文本处理完成之后执行</p>
<h4 id="462-演示"><strong>4.6.2 演示</strong></h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># awk -F: &#39;{print $1}&#39; awkdemo</span>
hello
linux
along
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># awk -F: &#39;/along/{print $1}&#39; awkdemo</span>
along
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># awk -F: &#39;1{print $1}&#39; awkdemo</span>
hello
linux
along
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># awk -F: &#39;0{print $1}&#39; awkdemo</span>
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># awk -F: &#39;/^h/,/^a/{print $1}&#39; awkdemo</span>
hello
linux
along
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># awk -F: &#39;BEGIN{print &#34;第一列&#34;}{print $1} END{print &#34;结束&#34;}&#39; awkdemo</span>
第一列
hello
linux
along
结束
</code></pre></td></tr></table>
</div>
</div><h3 id="47-awk有意思的案例"><strong>4.7 awk有意思的案例</strong></h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># seq 10</span>
<span class="m">1</span>
<span class="m">2</span>
<span class="m">3</span>
<span class="m">4</span>
<span class="m">5</span>
<span class="m">6</span>
<span class="m">7</span>
<span class="m">8</span>
<span class="m">9</span>
<span class="m">10</span>
---因为i<span class="o">=</span>0，为假，所以不打印
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># seq 10 |awk &#39;i=0&#39;</span>
---i<span class="o">=</span>1，为真，所以全部打印
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># seq 10 |awk &#39;i=1&#39;</span>
<span class="m">1</span>
<span class="m">2</span>
<span class="m">3</span>
<span class="m">4</span>
<span class="m">5</span>
<span class="m">6</span>
<span class="m">7</span>
<span class="m">8</span>
<span class="m">9</span>
<span class="m">10</span>
---只打印奇数行；奇数行i进入时本身为空，被赋为!i，即不为空，所以打印；偶数行i进入时本身不为空，被赋为!i，即为空，所以不打印
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># seq 10 |awk &#39;i=!i&#39;</span>
<span class="m">1</span>
<span class="m">3</span>
<span class="m">5</span>
<span class="m">7</span>
<span class="m">9</span>
---解释上一个操作，i在奇偶行的值
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># seq 10 |awk &#39;{i=!i;print i}&#39;</span>
<span class="m">1</span>
<span class="m">0</span>
<span class="m">1</span>
<span class="m">0</span>
<span class="m">1</span>
<span class="m">0</span>
<span class="m">1</span>
<span class="m">0</span>
<span class="m">1</span>
<span class="m">0</span>
---只打印偶数行，是上边打印奇数行的取反
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># seq 10 |awk &#39;!(i=!i)&#39;</span>
<span class="m">2</span>
<span class="m">4</span>
<span class="m">6</span>
<span class="m">8</span>
<span class="m">10</span>
---只打印偶数行；先对i进行赋值，即不为空，刚好和打印奇数行相反
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># seq 10 |awk -v i=1 &#39;i=!i&#39;</span>
<span class="m">2</span>
<span class="m">4</span>
<span class="m">6</span>
<span class="m">8</span>
<span class="m">10</span>

5、awk高阶用法
---------
</code></pre></td></tr></table>
</div>
</div><h3 id="51-awk控制语句if-else判断"><strong>5.1 awk控制语句—if-else判断</strong></h3>
<p>（1）语法</p>
<p>if(condition){statement;…}[else statement]  双分支
if(condition1){statement1}else if(condition2){statement2}else{statement3}  多分支</p>
<p>（2）使用场景：对awk 取得的整行或某个字段做条件判断</p>
<p>（3）演示</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># awk -F: &#39;{if($3&gt;10 &amp;&amp; $3&lt;1000)print $1,$3}&#39; /etc/passwd</span>
operator <span class="m">11</span>
games <span class="m">1</span>
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># awk -F: &#39;{if($NF==&#34;/bin/bash&#34;) print $1,$NF}&#39; /etc/passwd</span>
root /bin/bash
along /bin/bash
---输出总列数大于3的行
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># awk -F: &#39;{if(NF&gt;2) print $0}&#39; awkdemo</span>
linux:redhat:lalala:hahaha
along:love:you
---第3列&gt;<span class="o">=</span>1000为Common user，反之是root or Sysuser
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># awk -F: &#39;{if($3&gt;=1000) {printf &#34;Common user: %sn&#34;,$1} else{printf &#34;root or Sysuser: %sn&#34;,$1}}&#39; /etc/passwd</span>
root or Sysuser: root
root or Sysuser: bin
Common user: along
---磁盘利用率超过40的设备名和利用率
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># df -h|awk -F% &#39;/^/dev/{print $1}&#39;|awk &#39;$NF &gt; 40{print $1,$NF}&#39;</span>
/dev/mapper/cl-root <span class="m">43</span>
---test<span class="o">=</span>100和&gt;90为very good<span class="p">;</span> 90&gt;test&gt;60为good<span class="p">;</span> test&lt;60为no pass
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># awk &#39;BEGIN{ test=100;if(test&gt;90){print &#34;very good&#34;}else if(test&gt;60){ print &#34;good&#34;}else{print &#34;no pass&#34;}}&#39;</span> 
very good
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># awk &#39;BEGIN{ test=80;if(test&gt;90){print &#34;very good&#34;}else if(test&gt;60){ print &#34;good&#34;}else{print &#34;no pass&#34;}}&#39;</span> 
good
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># awk &#39;BEGIN{ test=50;if(test&gt;90){print &#34;very good&#34;}else if(test&gt;60){ print &#34;good&#34;}else{print &#34;no pass&#34;}}&#39;</span> 
no pass
</code></pre></td></tr></table>
</div>
</div><h3 id="52-awk控制语句while循环"><strong>5.2 awk控制语句—while循环</strong></h3>
<p>（1）语法</p>
<p>while(condition){statement;…}</p>
<p>注：条件“真”，进入循环；条件“假”， 退出循环</p>
<p>（2）使用场景</p>
<p>　　对一行内的多个字段逐一类似处理时使用</p>
<p>　　对数组中的各元素逐一处理时使用</p>
<p>（3）演示</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">---以along开头的行，以：为分隔，显示每一行的每个单词和其长度
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># awk -F: &#39;/^along/{i=1;while(i&lt;=NF){print $i,length($i); i++}}&#39; awkdemo</span>
along <span class="m">5</span>
love <span class="m">4</span>
you <span class="m">3</span>
---以：为分隔，显示每一行的长度大于6的单词和其长度
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># awk -F: &#39;{i=1;while(i&lt;=NF) {if(length($i)&gt;=6){print $i,length($i)}; i++}}&#39; awkdemo</span>
redhat <span class="m">6</span>
lalala <span class="m">6</span>
hahaha <span class="m">6</span>
---计算1+2+3+...+100<span class="o">=</span><span class="m">5050</span>
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># awk &#39;BEGIN{i=1;sum=0;while(i&lt;=100){sum+=i;i++};print sum}&#39;</span>
<span class="m">5050</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="53-awk控制语句do-while循环"><strong>5.3 awk控制语句—do-while循环</strong></h3>
<p>（1）语法</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="k">do</span> <span class="o">{</span>statement<span class="p">;</span>…<span class="o">}</span><span class="k">while</span><span class="o">(</span>condition<span class="o">)</span>
</code></pre></td></tr></table>
</div>
</div><p>意义：无论真假，至少执行一次循环体</p>
<p>（2）计算1+2+3+&hellip;+100=5050</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># awk &#39;BEGIN{sum=0;i=1;do{sum+=i;i++}while(i&lt;=100);print sum}&#39;</span>
<span class="m">5050</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="54-awk控制语句for循环"><strong>5.4 awk控制语句—for循环</strong></h3>
<p>（1）语法</p>
<p>for(expr1;expr2;expr3) {statement;…}</p>
<p>（2）特殊用法：遍历数组中的元素</p>
<p>for(var in array) {for-body}</p>
<p>（3）演示</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">---显示每一行的每个单词和其长度
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># awk -F: &#39;{for(i=1;i&lt;=NF;i++) {print$i,length($i)}}&#39; awkdemo</span>
hello <span class="m">5</span>
world <span class="m">5</span>
linux <span class="m">5</span>
redhat <span class="m">6</span>
lalala <span class="m">6</span>
hahaha <span class="m">6</span>
along <span class="m">5</span>
love <span class="m">4</span>
you <span class="m">3</span>
---求男m、女f各自的平均
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># cat sort.txt</span> 
xiaoming m <span class="m">90</span>
xiaohong f <span class="m">93</span>
xiaohei m <span class="m">80</span>
xiaofang f <span class="m">99</span>
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># awk &#39;{m[$2]++;score[$2]+=$3}END{for(i in m){printf &#34;%s:%6.2fn&#34;,i,score[i]/m[i]}}&#39; sort.txt</span>
m: 85.00
f: 96.00
</code></pre></td></tr></table>
</div>
</div><h3 id="55-和shell脚本中较相似的控制语句"><strong>5.5 和shell脚本中较相似的控制语句</strong></h3>
<h4 id="551-switch语句"><strong>5.5.1 switch语句</strong></h4>
<p>和shell中的case很像，就不在演示了</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">switch<span class="o">(</span>expression<span class="o">)</span> <span class="o">{</span><span class="k">case</span> VALUE1 or /REGEXP/:statement1<span class="p">;</span> <span class="k">case</span> VALUE2 or /REGEXP2/: statement2<span class="p">;</span>...<span class="p">;</span> default: statementn<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><h4 id="552-break和continue"><strong>5.5.2 break和continue</strong></h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">---奇数相加
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># awk &#39;BEGIN{sum=0;for(i=1;i&lt;=100;i++){if(i%2==0)continue;sum+=i}print sum}&#39;</span>
<span class="m">2500</span>
---1+2+...+66
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># awk &#39;BEGIN{sum=0;for(i=1;i&lt;=100;i++){if(i==66)break;sum+=i}print sum}&#39;</span>
<span class="m">2145</span>
</code></pre></td></tr></table>
</div>
</div><h4 id="553-next"><strong>5.5.3 next</strong></h4>
<p>next：提前结束对本行处理而直接进入下一行处理（awk 自身循环）</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">---只打印偶数行
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># awk -F: &#39;{if(NR%2!=0) next; print $1,$3}&#39; /etc/passwd</span>
bin <span class="m">1</span>
adm <span class="m">3</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="56-awk数组"><strong>5.6 awk数组</strong></h3>
<h4 id="561-关联数组arrayindex-expression"><strong>5.6.1 关联数组：array[index-expression]</strong></h4>
<p>（1）可使用任意字符串；字符串要使用双引号括起来</p>
<p>（2）如果某数组元素事先不存在，在引用时，awk 会自动创建此元素，并将其值初始化为“空串”</p>
<p>（3）若要判断数组中是否存在某元素，要使用“index in array”格式进行<strong>遍历</strong></p>
<p>（4）若要<strong>遍历数组中的每个元素</strong>，要使用for 循环**：for(var in array)** {for-body}</p>
<h4 id="562-演示"><strong>5.6.2 演示</strong></h4>
<p>（1）awk使用数组</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># cat awkdemo2</span>
aaa
bbbb
aaa
<span class="m">123</span>
<span class="m">123</span>
<span class="m">123</span>
---去除重复的行
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># awk &#39;!arr[$0]++&#39; awkdemo2</span>
aaa
bbbb
<span class="m">123</span>
---打印文件内容，和该行重复第几次出现
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># awk &#39;{!arr[$0]++;print $0,arr[$0]}&#39; awkdemo2</span>
aaa <span class="m">1</span>
bbbb <span class="m">1</span>
aaa <span class="m">2</span>
<span class="m">123</span> <span class="m">1</span>
<span class="m">123</span> <span class="m">2</span>
<span class="m">123</span> <span class="m">3</span>
</code></pre></td></tr></table>
</div>
</div><p>　　分析：把每行作为下标，第一次进来，相当于print ias&hellip;一样结果为空，打印空，!取反结果为1，打印本行，并且++变为不空，下次进来相同的行就是相同的下标，本来上次的值，！取反为空，不打印，++变为不空，所以每次重复进来的行都不打印</p>
<p>（2）数组遍历</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># awk &#39;BEGIN{abc[&#34;ceo&#34;]=&#34;along&#34;;abc[&#34;coo&#34;]=&#34;mayun&#34;;abc[&#34;cto&#34;]=&#34;mahuateng&#34;;for(i in abc){print i,abc[i]}}&#39;</span>
coo mayun
ceo along
cto mahuateng
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># awk &#39;{for(i=1;i&lt;=NF;i++)abc[$i]++}END{for(j in abc)print j,abc[j]}&#39; awkdemo2</span>
aaa <span class="m">2</span>
bbbb <span class="m">1</span>
<span class="m">123</span> <span class="m">3</span>
</code></pre></td></tr></table>
</div>
</div><h4 id="563-数值字符串处理"><strong>5.6.3 数值字符串处理</strong></h4>
<p>（1）数值处理</p>
<ul>
<li> rand()：返回0和1之间一个随机数，需有个种子 srand()，没有种子，一直输出0.237788</li>
</ul>
<p>演示：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># awk &#39;BEGIN{print rand()}&#39;</span>
0.237788
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># awk &#39;BEGIN{srand(); print rand()}&#39;</span>
0.51692
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># awk &#39;BEGIN{srand(); print rand()}&#39;</span>
0.189917
---取0-50随机数
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># awk &#39;BEGIN{srand(); print int(rand()*100%50)+1}&#39;</span>
<span class="m">12</span>
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># awk &#39;BEGIN{srand(); print int(rand()*100%50)+1}&#39;</span>
<span class="m">24</span>
</code></pre></td></tr></table>
</div>
</div><p>（2）字符串处理：</p>
<ul>
<li> length([s]) ：返回指定字符串的长度</li>
<li> sub(r,s,[t]) ：对t 字符串进行搜索r 表示的模式匹配的内容，并<strong>将第一个</strong>匹配的内容替换为s</li>
<li> gsub(r,s,[t]) ：对t 字符串进行搜索r 表示的模式匹配的内容，<strong>并全部替换</strong>为s 所表示的内容</li>
<li> plit(s,array,[r]) ：以r 为分隔符，切割字符串s ，并将切割后的结果保存至array 所表示的数组中，第一个索引值为1, 第二个索引值为2,…</li>
</ul>
<p>演示：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># echo &#34;2008:08:08 08:08:08&#34; | awk &#39;sub(/:/,&#34;-&#34;,$1)&#39;</span>
2008-08:08 08:08:08
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># echo &#34;2008:08:08 08:08:08&#34; | awk &#39;gsub(/:/,&#34;-&#34;,$0)&#39;</span>
2008-08-08 08-08-08
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># echo &#34;2008:08:08 08:08:08&#34; | awk &#39;{split($0,i,&#34;:&#34;)}END{for(n in i){print n,i[n]}}&#39;</span>
<span class="m">4</span> <span class="m">08</span>
<span class="m">5</span> <span class="m">08</span>
<span class="m">1</span> <span class="m">2008</span>
<span class="m">2</span> <span class="m">08</span>
<span class="m">3</span> <span class="m">08</span> <span class="m">08</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="57-awk自定义函数"><strong>5.7 awk自定义函数</strong></h3>
<p>（1）格式：和bash区别：定义函数（）中需加参数，return返回值不是$?，是相当于echo输出</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="k">function</span> name <span class="o">(</span> parameter, parameter, ... <span class="o">)</span> <span class="o">{</span>
    statements
    <span class="k">return</span> expression
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>（2）演示</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># cat fun.awk</span> 
<span class="k">function</span> max<span class="o">(</span>v1,v2<span class="o">)</span> <span class="o">{</span>
	v1&gt;v2?var<span class="o">=</span>v1:var<span class="o">=</span>v2
	<span class="k">return</span> var
<span class="o">}</span>
BEGIN<span class="o">{</span><span class="nv">a</span><span class="o">=</span>3<span class="p">;</span><span class="nv">b</span><span class="o">=</span>2<span class="p">;</span>print max<span class="o">(</span>a,b<span class="o">)}</span>
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># awk -f fun.awk</span> 
<span class="m">3</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="58-awk中调用shell-命令"><strong>5.8 awk中调用shell 命令</strong></h3>
<p>（1）system 命令</p>
<p>　　空格是awk 中的字符串连接符，如果system中需要使用awk中的变量可以使用空格分隔，或者说除了awk 的变量外其他一律用&rdquo;&rdquo; 引用 起来。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># awk BEGIN&#39;{system(&#34;hostname&#34;) }&#39;</span>
along
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># awk &#39;BEGIN{name=&#34;along&#34;;system(&#34;echo &#34;name)}&#39;  注：&#34;echo &#34; echo后有空格</span>
along
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># awk &#39;BEGIN{score=100; system(&#34;echo your score is &#34; score) }&#39;</span>
your score is <span class="m">100</span>
</code></pre></td></tr></table>
</div>
</div><p>（2）awk 脚本</p>
<p>将awk 程序写成脚本，直接调用或执行</p>
<p>示例：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># cat f1.awk</span> 
<span class="o">{</span><span class="k">if</span><span class="o">(</span><span class="nv">$3</span>&gt;<span class="o">=</span>1000<span class="o">)</span>print <span class="nv">$1</span>,<span class="nv">$3</span><span class="o">}</span>
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># cat f2.awk</span> 
<span class="c1">#!/bin/awk -f</span>
<span class="o">{</span><span class="k">if</span><span class="o">(</span><span class="nv">$3</span> &gt;<span class="o">=</span> 1000<span class="o">)</span>print <span class="nv">$1</span>,<span class="nv">$3</span><span class="o">}</span>
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># chmod +x f2.awk</span>
<span class="o">[</span>root@along ~<span class="o">]</span><span class="c1"># ./f2.awk -F: /etc/passwd</span>
along <span class="m">1000</span>
</code></pre></td></tr></table>
</div>
</div><p>（3）向awk脚本传递参数</p>
<p>① 格式：</p>
<p>awkfile var=value var2=value2&hellip; Inputfile</p>
<p>　　注意 ：在BEGIN 过程 中不可用。直到 首行输入完成以后，变量才可用 。可以通过**-v  参数**，让awk 在执行BEGIN 之前得到变量的值。命令行中每一个指定的变量都需要一个-v</p>
<p>② 示例</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">[root@along ~]# cat test.awk 
#!/bin/awk -f
{if($3 &gt;=min &amp;&amp; $3&lt;=max)print $1,$3}
[root@along ~]# chmod +x test.awk
[root@along ~]# ./test.awk -F: min=100 max=200 /etc/passwd
systemd-network 192
</code></pre></td></tr></table>
</div>
</div><h2 id="6grep-awk-sed对比">6、grep awk sed对比</h2>
<p>grep 主要用于搜索某些字符串；</p>
<p>sed，awk 用于处理文本 ；</p>
<p><strong>grep基本是以行为单位处理文本的</strong>**； 而awk可以做更细分的处理，通过指定分隔符将一行（一条记录）划分为多个字段，以字段为单位处理文本。**awk中支持C语法，可以有分支条件判断、循环语句等，相当于一个小型编程语言。</p>
<p>　　awk功能比较多是一个编程语言了。 grep功能简单，就是一个简单的正则表达式的匹配。 awk的功能依赖于grep。</p>
<p><strong>grep可以理解为主要作用是在一个文件中查找过滤需要的内容</strong>。awk不是过滤查找，而是文本处理工具，是把一个文件处理成你想要的格式。</p>
<p>　　AWK的功能是什么？与sed和grep很相似，<strong>awk是一种样式扫描与处理工具</strong>。但其功能却大大强于sed和grep。awk提供了极其强大的功能：它几乎可以完成grep和sed所能完成的全部工作，同时，它还可以可以进行<strong>样式装入、流控制、数学运算符、进程控制语句甚至于内置的变量和函数</strong>。它具备了一个完整的语言所应具有的几乎所有精美特性。实际上，awk的确拥有自己的语言：awk程序设计语言，awk的三位创建者已将它正式定义为：样式扫描和处理语言。使用awk的第一个理由是基于文本的样式扫描和处理是我们经常做的工作，awk所做的工作有些象数据库，但与数据库不同的是，它处理的是文本文件，这些文件没有专门的存储格式，普通的人们就能编辑、阅读、理解和处理它们。而数据库文件往往具有特殊的存储格式，这使得它们必须用数据库处理程序来处理它们。既然这种类似于数据库的处理工作我们经常会遇到，我们就应当找到处理它们的简便易行的方法，UNIX有很多这方面的工具，例如sed 、grep、sort以及find等等，awk是其中十分优秀的一种。</p>
<p><strong>使用awk的第二个理由是awk是一个简单的工具</strong>，当然这是相对于其强大的功能来说的。的确，UNIX有许多优秀的工具，例如UNIX天然的开发工具C语言及其延续C++就非常的优秀。但相对于它们来说，awk完成同样的功能要方便和简捷得多。这首先是因为awk提供了适应多种需要的解决方案：从解决简单问题的awk命令行到复杂而精巧的awk程序设计语言，这样做的好处是，你可以不必用复杂的方法去解决本来很简单的问题。例如，你可以用一个命令行解决简单的问题，而C不行，即使一个再简单的程序，C语言也必须经过编写、编译的全过程。其次，awk本身是解释执行的，这就使得awk程序不必经过编译的过程，同时，这也使得它与shell script程序能够很好的契合。最后，awk本身较C语言简单，虽然awk吸收了C语言很多优秀的成分，熟悉C语言会对学习awk有很大的帮助，但awk本身不须要会使用C语言——一种功能强大但需要大量时间学习才能掌握其技巧的开发工具。</p>
<p><strong>使用awk的第三个理由是awk是一个容易获得的工具</strong>。与C和C++语言不同，awk只有一个文件(/bin/awk)，而且几乎每个版本的UNIX都提供各自版本的awk，你完全不必费心去想如何获得awk。但C语言却不是这样，虽然C语言是UNIX天然的开发工具，但这个开发工具却是单独发行的，换言之，你必须为你的UNIX版本的C语言开发工具单独付费（当然使用D版者除外），获得并安装它，然后你才可以使用它。</p>
<p>　　基于以上理由，再加上awk强大的功能，我们有理由说，如果你要处理与文本样式扫描相关的工作，awk应该是你的第一选择。在这里有一个可遵循的一般原则：如果你用普通的shell工具或shell script有困难的话，试试awk,如果awk仍不能解决问题，则便用C语言，如果C语言仍然失败，则移至C++。</p>
<p>**sed是一个非交互性文本流编辑器。**它编辑文件或标准输入导出的文本拷贝。sed编辑器按照一次处理 一行的方式来处理文件（或者输入）并把输出送到屏幕上。你可以在vi和ex/ed编辑器里识别他的命令。sed把当前正在处理的行保存在一个临时缓存里，这个缓存叫做模式空间。一但sed完成了对模式空间里的行的处理（即对该行执行sed命令），就把模式空间的行送到屏幕上（除非该命令要删除该行活禁止打印）。处理完该行之后，从模式空间里删除它，然后把下一行读入模式空间，进行处理，并显示。当输入文件的最后一行处理完后，sed终止。通过把每一行存在一个临时缓存里并编辑该行，初始文件不会被修改或被破坏</p>

    </div>

    <div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">文章作者</span>
    <span class="item-content">gzxb0712</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">上次更新</span>
    <span class="item-content">
        2020-08-17 21:01
        
    </span>
  </p>
  
  <p class="copyright-item">
    <span class="item-title">许可协议</span>
    <span class="item-content"><a target="_blank" rel="license noopener" href="https://github.com/gzxb0712/blog/blob/master/LICENSE">MIT</a></span>
  </p>
</div>
<div class="post-reward">
  <input type="checkbox" name="reward" id="reward" hidden />
  <label class="reward-button" for="reward">赞赏支持</label>
  <div class="qr-code">
    
    <label class="qr-code-image" for="reward">
        <img class="image" src="/images/wechat.png">
        <span>微信佛系打赏</span>
      </label>
    <label class="qr-code-image" for="reward">
        <img class="image" src="/images/alipay.jpg">
        <span>支付宝佛系打赏</span>
      </label>
  </div>
</div><footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/bash/">bash</a>
          <a href="/tags/shell/">shell</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/go/go-cheat-sheet/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">go备忘清单笔记</span>
            <span class="prev-text nav-mobile">上一篇</span>
          </a>
        <a class="next" href="/post/shell/shell_book/">
            <span class="next-text nav-default">Shell脚本学习</span>
            <span class="next-text nav-mobile">下一篇</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="http://www.cnblogs.com/gzxb0712" class="iconfont icon-cnblogs" title="cnblogs"></a>
      <a href="mailto:gzxb0712@qq.com" class="iconfont icon-email" title="email"></a>
      <a href="https://github.com/gzxb0712" class="iconfont icon-github" title="github"></a>
      <a href="https://juejin.im/user/59aeb829f265da249960595a" class="iconfont icon-juejin" title="juejin"></a>
      <a href="https://www.v2ex.com/member/gzxb0712" class="iconfont icon-v2ex" title="v2ex"></a>
  <a href="https://xiebiao.top/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    由 <a class="hexo-link" href="https://gohugo.io">Hugo</a> 强力驱动
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    主题 - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  <div class="busuanzi-footer">
    <span id="busuanzi_container_site_pv"> 本站总访问量 <span id="busuanzi_value_site_pv"><img src="/img/spinner.svg" alt="spinner.svg"/></span> 次 </span>
      <span class="division">|</span>
    <span id="busuanzi_container_site_uv"> 本站总访客数 <span id="busuanzi_value_site_uv"><img src="/img/spinner.svg" alt="spinner.svg"/></span> 人 </span>
  </div>

  <span class="copyright-year">
    &copy; 
    2019 - 
    2020
    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">gzxb0712</span>
  </span>
</div>
    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/timeago.js@3.0.2/dist/timeago.min.js" integrity="sha256-jwCP0NAdCBloaIWTWHmW4i3snUNMHUNO+jr9rYd2iOI=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/timeago.js@3.0.2/dist/timeago.locales.min.js" integrity="sha256-ZwofwC1Lf/faQCzN7nZtfijVV6hSwxjQMwXL4gn9qU8=" crossorigin="anonymous"></script>
  <script><!-- NOTE: timeago.js uses the language code format like "zh_CN" (underscore and case sensitive) -->
    var languageCode = "zh-CN".replace(/-/g, '_').replace(/_(.*)/, function ($0, $1) {return $0.replace($1, $1.toUpperCase());});
    timeago().render(document.querySelectorAll('.timeago'), languageCode);
    timeago.cancel();  
  </script>



<script type="text/javascript" src="/js/main.min.d7b7ada643c9c1a983026e177f141f7363b4640d619caf01d8831a6718cd44ea.js"></script>


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-138883536-1', 'auto');
	ga('set', 'anonymizeIp', true);
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>







</body>
</html>
