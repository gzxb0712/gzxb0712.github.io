<!DOCTYPE html>
<html lang="zh-cn">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Shell脚本学习 - Bill World</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="gzxb0712" /><meta name="description" content="01- Shell脚本学习&amp;ndash;入门 简介 Shell是一种脚本语言，那么，就必须有解释器来执行这些脚本。 Unix/Linux上常见的Shel" /><meta name="keywords" content="Mac, Github, Vue, React, Front End" />






<meta name="generator" content="Hugo 0.74.3 with theme even" />


<link rel="canonical" href="https://xiebiao.top/post/shell/shell_book/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">

<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<link href="/sass/main.min.651e6917abb0239242daa570c2bec9867267bbcd83646da5a850afe573347b44.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">
<link rel="stylesheet" href="/css/reset-even.css">


<meta property="og:title" content="Shell脚本学习" />
<meta property="og:description" content="01- Shell脚本学习&ndash;入门 简介 Shell是一种脚本语言，那么，就必须有解释器来执行这些脚本。 Unix/Linux上常见的Shel" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://xiebiao.top/post/shell/shell_book/" />
<meta property="article:published_time" content="2020-08-16T21:01:30+00:00" />
<meta property="article:modified_time" content="2020-08-16T21:01:30+00:00" />
<meta itemprop="name" content="Shell脚本学习">
<meta itemprop="description" content="01- Shell脚本学习&ndash;入门 简介 Shell是一种脚本语言，那么，就必须有解释器来执行这些脚本。 Unix/Linux上常见的Shel">
<meta itemprop="datePublished" content="2020-08-16T21:01:30+00:00" />
<meta itemprop="dateModified" content="2020-08-16T21:01:30+00:00" />
<meta itemprop="wordCount" content="12222">



<meta itemprop="keywords" content="bash,shell," />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Shell脚本学习"/>
<meta name="twitter:description" content="01- Shell脚本学习&ndash;入门 简介 Shell是一种脚本语言，那么，就必须有解释器来执行这些脚本。 Unix/Linux上常见的Shel"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">Bill World</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">首页</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">归档</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">分类</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">标签</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">关于我</li>
      </a>
  </ul>
</nav>
  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">Bill World</a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">首页</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">归档</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">分类</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">标签</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">关于我</a>
      </li>
  </ul>
</nav>
    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">Shell脚本学习</h1>

      <div class="post-meta">
        <span class="post-time"> 2020-08-16 21:01 </span>
        <div class="post-category">
            <a href="/categories/shell/"> shell </a>
            </div>
          <span class="more-meta"> 约 12222 字 </span>
          <span class="more-meta"> 预计阅读 25 分钟 </span>
        <span id="busuanzi_container_page_pv" class="more-meta"> <span id="busuanzi_value_page_pv"><img src="/img/spinner.svg" alt="spinner.svg"/></span> 次阅读 </span>
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">文章目录</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#简介">简介</a></li>
    <li><a href="#hello-world">Hello World</a></li>
    <li><a href="#注释">注释</a></li>
    <li><a href="#打印输出">打印输出</a></li>
    <li><a href="#变量定义">变量定义</a>
      <ul>
        <li><a href="#定义变量">定义变量</a></li>
        <li><a href="#使用变量">使用变量</a></li>
        <li><a href="#变量类型">变量类型</a></li>
      </ul>
    </li>
    <li><a href="#特殊变量">特殊变量</a>
      <ul>
        <li><a href="#-和--的区别"><code>$*</code> 和 <code>$@</code> 的区别</a></li>
        <li><a href="#退出状态">退出状态</a></li>
      </ul>
    </li>
    <li><a href="#转义字符">转义字符</a></li>
    <li><a href="#命令替换">命令替换</a></li>
    <li><a href="#变量替换">变量替换</a></li>
    <li><a href="#一个完整的shell示例">一个完整的shell示例</a></li>
  </ul>

  <ul>
    <li><a href="#shell运算符">Shell运算符</a>
      <ul>
        <li><a href="#算术运算符">算术运算符</a></li>
        <li><a href="#关系运算符">关系运算符</a></li>
      </ul>
    </li>
    <li><a href="#布尔运算符">布尔运算符</a></li>
    <li><a href="#字符串运算符">字符串运算符</a></li>
    <li><a href="#文件测试运算符">文件测试运算符</a></li>
  </ul>

  <ul>
    <li><a href="#字符串">字符串</a>
      <ul>
        <li><a href="#拼接字符串">拼接字符串</a></li>
        <li><a href="#获取字符串长度">获取字符串长度</a></li>
        <li><a href="#截取字符串">截取字符串</a></li>
        <li><a href="#查找字符串">查找字符串</a></li>
      </ul>
    </li>
    <li><a href="#数组">数组</a></li>
    <li><a href="#总结">总结</a></li>
  </ul>

  <ul>
    <li><a href="#条件判断if语句">条件判断：if语句</a></li>
    <li><a href="#分支控制case语句">分支控制：case语句</a></li>
    <li><a href="#for循环">for循环</a></li>
    <li><a href="#while循环">while循环</a></li>
    <li><a href="#until循环">until循环</a></li>
    <li><a href="#跳出循环">跳出循环</a>
      <ul>
        <li><a href="#break">break</a></li>
      </ul>
    </li>
    <li><a href="#continue">continue</a></li>
  </ul>

  <ul>
    <li><a href="#函数定义">函数定义</a></li>
    <li><a href="#函数参数">函数参数</a></li>
    <li><a href="#如何获取函数返回值">如何获取函数返回值</a></li>
  </ul>

  <ul>
    <li><a href="#shell输入输出重定向">Shell输入输出重定向</a></li>
    <li><a href="#重定向深入讲解">重定向深入讲解</a></li>
    <li><a href="#here-document">Here Document</a></li>
    <li><a href="#devnull-文件">/dev/null 文件</a></li>
    <li><a href="#shell文件包含">Shell文件包含</a></li>
    <li><a href="#获取当前正在执行脚本的绝对路径">获取当前正在执行脚本的绝对路径</a></li>
    <li><a href="#按特定字符串截取字符串">按特定字符串截取字符串</a></li>
    <li><a href="#awk">awk</a>
      <ul>
        <li><a href="#awk简介">awk简介</a></li>
        <li><a href="#示例">示例</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<h1 id="01--shell脚本学习--入门">01- Shell脚本学习&ndash;入门</h1>
<h2 id="简介">简介</h2>
<blockquote>
<p>Shell是一种脚本语言，那么，就必须有解释器来执行这些脚本。</p>
</blockquote>
<p>Unix/Linux上常见的Shell脚本解释器有bash、sh、csh、ksh等，习惯上把它们称作一种Shell。我们常说有多少种Shell，其实说的是Shell脚本解释器。</p>
<h2 id="hello-world">Hello World</h2>
<p>打开文本编辑器，新建一个文件<code>test.sh</code>，扩展名为<code>.sh</code>（sh代表shell）。</p>
<p>输入一些代码：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="cp">#!/bin/bash
</span><span class="cp"></span><span class="nb">echo</span> <span class="s2">&#34;Hello World !&#34;</span>
</code></pre></td></tr></table>
</div>
</div><p>在命令行运行：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">chmod +x test.sh
./test.sh
</code></pre></td></tr></table>
</div>
</div><p>运行结果：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">Hello World !
</code></pre></td></tr></table>
</div>
</div><p><code>#!</code> 是一个约定的标记，它告诉系统这个脚本需要什么解释器来执行，即<strong>使用哪一种Shell</strong>。<code>echo</code>命令用于向窗口输出文本。</p>
<h2 id="注释">注释</h2>
<p>以<code>#</code>开头的行就是注释，会被解释器忽略。sh里没有多行注释，只能每一行加一个#号。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># --------</span>
<span class="c1"># 这是注释块</span>
<span class="c1"># --------</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="打印输出">打印输出</h2>
<p><strong>echo</strong>： 是Shell的一个内部指令，用于在屏幕上打印出指定的字符串。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="nb">echo</span> arg 
<span class="nb">echo</span> -e arg <span class="c1">#执行arg里的转义字符。echo加了-e默认会换行</span>
<span class="nb">echo</span> arg &gt; myfile <span class="c1">#显示结果重定向至文件，会生成myfile文件</span>
</code></pre></td></tr></table>
</div>
</div><p>注意，echo后单引号和双引号作用是不同的。单引号不能转义里面的字符。双引号可有可无，单引号主要用在原样输出中。</p>
<p><strong>printf</strong>：格式化输出语句。
<code>printf</code> 命令用于格式化输出， 是<code>echo</code>命令的增强版。它是C语言<code>printf()</code>库函数的一个有限的变形，并且在语法上有些不同。</p>
<p>如同 <code>echo</code> 命令，<code>printf</code> 命令也可以输出简单的字符串:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="nb">printf</span> <span class="s2">&#34;hello\n&#34;</span>
</code></pre></td></tr></table>
</div>
</div><p><code>printf</code> 不像 <code>echo</code> 那样会自动换行，必须显式添加换行符(\n)。</p>
<p>注意：<code>printf</code> 由 POSIX 标准所定义，移植性要比 <code>echo</code> 好。</p>
<p>printf 命令的语法：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="nb">printf</span>  format-string  <span class="o">[</span>arguments...<span class="o">]</span>

<span class="c1">#format-string 为格式控制字符串，arguments 为参数列表。功能和用法与c语言的 printf 命令类似。</span>
</code></pre></td></tr></table>
</div>
</div><p>这里仅说明与C语言printf()函数的不同：</p>
<ul>
<li>printf 命令不用加括号</li>
<li>format-string 可以没有引号，但最好加上，单引号双引号均可。</li>
<li>参数比格式控制符(%)多时，格式控制符可以重用，可以将所有参数都转换。</li>
<li>arguments 使用空格分隔，不用逗号。</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># 双引号</span>
<span class="nb">printf</span> <span class="s2">&#34;%d %s\n&#34;</span> <span class="m">10</span> <span class="s2">&#34;abc&#34;</span>
<span class="m">10</span> abc
<span class="c1"># 单引号与双引号效果一样</span> 
<span class="nb">printf</span> <span class="s1">&#39;%d %s\n&#39;</span> <span class="m">10</span> <span class="s2">&#34;abc&#34;</span> 
<span class="m">10</span> abc

<span class="c1"># 没有引号也可以输出</span>
<span class="nb">printf</span> %s abc
abc

<span class="c1"># 但是下面的会出错：</span>
<span class="nb">printf</span> %d %s <span class="m">10</span> abc 
<span class="c1">#因为系统分不清楚哪个是参数，这时候最好加引号了。</span>


<span class="c1"># 格式只指定了一个参数，但多出的参数仍然会按照该格式输出，format-string 被重用</span>
$ <span class="nb">printf</span> %s a b c
abc
$ <span class="nb">printf</span> <span class="s2">&#34;%s\n&#34;</span> a b c
a
b
c

<span class="c1"># 如果没有 arguments，那么 %s 用NULL代替，%d 用 0 代替</span>
$ <span class="nb">printf</span> <span class="s2">&#34;%s and %d \n&#34;</span> 
and <span class="m">0</span>

<span class="c1"># 如果以 %d 的格式来显示字符串，那么会有警告，提示无效的数字，此时默认置为 0</span>
$ <span class="nb">printf</span> <span class="s2">&#34;The first program always prints&#39;%s,%d\n&#39;&#34;</span> Hello Shell
-bash: printf: Shell: invalid number
The first program always prints <span class="s1">&#39;Hello,0&#39;</span>
$
</code></pre></td></tr></table>
</div>
</div><p><strong>read</strong>： 命令行从输入设备读入内容</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="cp">#!/bin/bash
</span><span class="cp"></span>
<span class="c1"># Author : lalal</span>

<span class="nb">echo</span> <span class="s2">&#34;What is your name?&#34;</span>
<span class="nb">read</span> NAME <span class="c1">#输入</span>
<span class="nb">echo</span> <span class="s2">&#34;Hello, </span><span class="nv">$NAME</span><span class="s2">&#34;</span>
</code></pre></td></tr></table>
</div>
</div><p>运行脚本：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">chmod +x test.sh
./test.sh

What is your name?
lalal

Hello, lalal
</code></pre></td></tr></table>
</div>
</div><h2 id="变量定义">变量定义</h2>
<p>Shell支持自定义变量。</p>
<h3 id="定义变量">定义变量</h3>
<p>定义变量时，变量名不加美元符号（$），如：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="nv">variableName</span><span class="o">=</span><span class="s2">&#34;value&#34;</span>
</code></pre></td></tr></table>
</div>
</div><p>注意，<strong>变量名和等号之间不能有空格</strong>，这可能和你熟悉的所有编程语言都不一样。有空格会出错。</p>
<p>同时，变量名的命名须遵循如下规则：</p>
<blockquote>
<ul>
<li>首个字符必须为字母（a-z，A-Z）。</li>
</ul>
</blockquote>
<ul>
<li>中间不能有空格，可以使用下划线（_）。</li>
<li>不能使用标点符号。</li>
<li>不能使用bash里的关键字（可用help命令查看保留关键字）。</li>
</ul>
<p>变量定义举例：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="nv">myUrl</span><span class="o">=</span><span class="s2">&#34;lalal&#34;</span>
<span class="nv">myNum</span><span class="o">=</span><span class="m">100</span>
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>注意：变量中间不能有空格，如果手误写错(例如 <code>var = test</code>)，刚好要使用<code>rm -rf $var/</code>删除这个目录，实际删除的是<code>/</code>！</p>
</blockquote>
<h3 id="使用变量">使用变量</h3>
<p>使用一个定义过的变量，只要在变量名前面加美元符号（$）即可，如：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="nv">your_name</span><span class="o">=</span><span class="s2">&#34;lalal&#34;</span>
<span class="nb">echo</span> <span class="nv">$your_name</span>
<span class="nb">echo</span> <span class="si">${</span><span class="nv">your_name</span><span class="si">}</span>
</code></pre></td></tr></table>
</div>
</div><p><strong>变量名外面的花括号是可选的</strong>，加不加都行，加花括号是为了帮助解释器识别变量的边界，比如下面这种情况：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="k">for</span> skill in C PHP Python Java 
<span class="k">do</span>
    <span class="nb">echo</span> <span class="s2">&#34;I am good at </span><span class="si">${</span><span class="nv">skill</span><span class="si">}</span><span class="s2">Script&#34;</span>
<span class="k">done</span>
</code></pre></td></tr></table>
</div>
</div><p>如果不给skill变量加花括号，写成<code>echo &quot;I am good at $skillScript&quot;</code>，解释器就会把<code>$skillScript</code>当成一个变量（其值为空），代码执行结果就不是我们期望的样子了。</p>
<p><strong>推荐给所有变量加上花括号，这是个好的编程习惯。</strong></p>
<blockquote>
<p>已定义的变量，可以被重新定义。</p>
</blockquote>
<p>在变量前面加<code>readonly</code> 命令可以将变量定义为只读变量，只读变量的值不能被改变。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="nv">url</span><span class="o">=</span><span class="s2">&#34;http://www.baidu.com&#34;</span>
<span class="nb">readonly</span> url
<span class="nv">url</span><span class="o">=</span><span class="s2">&#34;http://www.baidu.com&#34;</span>
</code></pre></td></tr></table>
</div>
</div><p>使用 <code>unset</code> 命令可以删除变量。语法：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="nb">unset</span> variable_name
</code></pre></td></tr></table>
</div>
</div><p>变量被删除后不能再次使用；unset 命令不能删除只读变量。</p>
<h3 id="变量类型">变量类型</h3>
<p>运行shell时，会同时存在三种变量：
<strong>1) 局部变量</strong>
局部变量在脚本或命令中定义，仅在当前shell实例中有效，其他shell启动的程序不能访问局部变量。</p>
<p><strong>2) 环境变量</strong>
所有的程序，包括shell启动的程序，都能访问环境变量，有些程序需要环境变量来保证其正常运行。必要的时候shell脚本也可以定义环境变量。</p>
<p><strong>3) shell变量</strong>
shell变量是由shell程序设置的特殊变量。shell变量中有一部分是环境变量，有一部分是局部变量，这些变量保证了shell的正常运行。</p>
<h2 id="特殊变量">特殊变量</h2>
<p>前面已经讲到，<strong>变量名只能包含数字、字母和下划线</strong>，因为某些包含其他字符的变量有特殊含义，这样的变量被称为<strong>特殊变量</strong>。</p>
<table>
<thead>
<tr>
<th>变量</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>$0</code></td>
<td>当前脚本的文件名</td>
</tr>
<tr>
<td><code>$n</code></td>
<td>传递给脚本或函数的参数。n 是一个数字，表示第几个参数。例如，第一个参数是<code>$1</code>，第二个参数是<code>$2</code>。</td>
</tr>
<tr>
<td><code>$#</code></td>
<td>传递给脚本或函数的参数个数。</td>
</tr>
<tr>
<td><code>$*</code></td>
<td>传递给脚本或函数的所有参数。</td>
</tr>
<tr>
<td><code>$@</code></td>
<td>传递给脚本或函数的所有参数。被双引号(&rdquo; &ldquo;)包含时，与 <code>$*</code> 稍有不同</td>
</tr>
<tr>
<td><code>$?</code></td>
<td>上个命令的退出状态，或函数的返回值。</td>
</tr>
<tr>
<td><code>$$</code></td>
<td>当前Shell进程ID。对于 Shell 脚本，就是这些脚本所在的进程ID。</td>
</tr>
</tbody>
</table>
<p>示例：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="cp">#!/bin/bash
</span><span class="cp"></span><span class="nb">echo</span> <span class="s2">&#34;File Name: </span><span class="nv">$0</span><span class="s2">&#34;</span>
<span class="nb">echo</span> <span class="s2">&#34;First Parameter : </span><span class="nv">$1</span><span class="s2">&#34;</span>
<span class="nb">echo</span> <span class="s2">&#34;Second Parameter : </span><span class="nv">$2</span><span class="s2">&#34;</span>
<span class="nb">echo</span> <span class="s2">&#34;Quoted Values: </span><span class="nv">$@</span><span class="s2">&#34;</span>
<span class="nb">echo</span> <span class="s2">&#34;Quoted Values: </span><span class="nv">$*</span><span class="s2">&#34;</span>
<span class="nb">echo</span> <span class="s2">&#34;Total Number of Parameters : </span><span class="nv">$#</span><span class="s2">&#34;</span>
</code></pre></td></tr></table>
</div>
</div><p>运行结果：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">$./test.sh Zara Ali
File Name : ./test.sh
First Parameter : Zara
Second Parameter : Ali
Quoted Values: Zara Ali
Quoted Values: Zara Ali
Total Number of Parameters : <span class="m">2</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="-和--的区别"><code>$*</code> 和 <code>$@</code> 的区别</h3>
<p><code>$*</code> 和 <code>$@</code> 都表示传递给函数或脚本的所有参数，不被双引号(&rdquo; &ldquo;)包含时，都以<code>&quot;$1&quot; &quot;$2&quot; … &quot;$n&quot;</code> 的形式输出所有参数。</p>
<p>但是当它们被双引号(&rdquo; &ldquo;)包含时，&ldquo;<code>$*</code>&rdquo; 会将所有的参数作为一个整体，以&quot;<code>$1 $2 … $n</code>&quot;的形式输出所有参数；&ldquo;<code>$@</code>&rdquo; 会将各个参数分开，以<code>&quot;$1&quot; &quot;$2&quot; … &quot;$n&quot;</code> 的形式输出所有参数。</p>
<p>示例：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="cp">#!/bin/bash
</span><span class="cp"></span><span class="nb">echo</span> <span class="s2">&#34;\$*=&#34;</span> <span class="nv">$*</span>
<span class="nb">echo</span> <span class="s2">&#34;\&#34;\$*\&#34;=&#34;</span> <span class="s2">&#34;</span><span class="nv">$*</span><span class="s2">&#34;</span>
<span class="nb">echo</span> <span class="s2">&#34;\$@=&#34;</span> <span class="nv">$@</span>
<span class="nb">echo</span> <span class="s2">&#34;\&#34;\$@\&#34;=&#34;</span> <span class="s2">&#34;</span><span class="nv">$@</span><span class="s2">&#34;</span>
<span class="nb">echo</span> <span class="s2">&#34;print each param from \$*&#34;</span>
<span class="k">for</span> var in <span class="nv">$*</span>
<span class="k">do</span>
    <span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$var</span><span class="s2">&#34;</span>
<span class="k">done</span>
<span class="nb">echo</span> <span class="s2">&#34;print each param from \$@&#34;</span>
<span class="k">for</span> var in <span class="nv">$@</span>
<span class="k">do</span>
    <span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$var</span><span class="s2">&#34;</span>
<span class="k">done</span>
<span class="nb">echo</span> <span class="s2">&#34;print each param from \&#34;\$*\&#34;&#34;</span>
<span class="k">for</span> var in <span class="s2">&#34;</span><span class="nv">$*</span><span class="s2">&#34;</span>
<span class="k">do</span>
    <span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$var</span><span class="s2">&#34;</span>
<span class="k">done</span>
<span class="nb">echo</span> <span class="s2">&#34;print each param from \&#34;\$@\&#34;&#34;</span>
<span class="k">for</span> var in <span class="s2">&#34;</span><span class="nv">$@</span><span class="s2">&#34;</span>
<span class="k">do</span>
    <span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$var</span><span class="s2">&#34;</span>
<span class="k">done</span>
</code></pre></td></tr></table>
</div>
</div><p>执行 <code>./test.sh &quot;a&quot; &quot;b&quot; &quot;c&quot; &quot;d&quot;</code>，看到下面的结果：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="nv">$*</span><span class="o">=</span>  a b c d
<span class="s2">&#34;</span><span class="nv">$*</span><span class="s2">&#34;</span><span class="o">=</span> a b c d
<span class="nv">$@</span><span class="o">=</span>  a b c d
<span class="s2">&#34;</span><span class="nv">$@</span><span class="s2">&#34;</span><span class="o">=</span> a b c d
print each param from <span class="nv">$*</span>
a
b
c
d
print each param from <span class="nv">$@</span>
a
b
c
d
print each param from <span class="s2">&#34;</span><span class="nv">$*</span><span class="s2">&#34;</span>
a b c d
print each param from <span class="s2">&#34;</span><span class="nv">$@</span><span class="s2">&#34;</span>
a
b
c
d
</code></pre></td></tr></table>
</div>
</div><h3 id="退出状态">退出状态</h3>
<p><code>$?</code> 可以获取上一个命令的退出状态。所谓退出状态，就是上一个命令执行后的返回结果。</p>
<p>示例：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="k">if</span> <span class="o">[[</span> <span class="nv">$?</span> !<span class="o">=</span> <span class="m">0</span> <span class="o">]]</span><span class="p">;</span><span class="k">then</span>
  <span class="nb">echo</span> <span class="s2">&#34;error&#34;</span>
  <span class="nb">exit</span> 1<span class="p">;</span>
<span class="k">fi</span>
</code></pre></td></tr></table>
</div>
</div><p>退出状态是一个数字，一般情况下，大部分命令执行成功会返回 0，失败返回 1。</p>
<p>不过，也有一些命令返回其他值，表示不同类型的错误。</p>
<h2 id="转义字符">转义字符</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">转义字符	含义
<span class="se">\\</span>	反斜杠
<span class="se">\a</span>	警报，响铃
<span class="se">\b</span>	退格（删除键）
<span class="se">\f</span>	换页<span class="o">(</span>FF<span class="o">)</span>，将当前位置移到下页开头
<span class="se">\n</span>	换行
<span class="se">\r</span>	回车
<span class="se">\t</span>	水平制表符（tab键） 
<span class="se">\v</span>	垂直制表符
</code></pre></td></tr></table>
</div>
</div><p><strong>shell默认是不转义上面的字符的。需要加<code>-e</code>选项。</strong></p>
<p>举个例子：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="cp">#!/bin/bash
</span><span class="cp"></span><span class="nv">a</span><span class="o">=</span><span class="m">11</span>
<span class="nb">echo</span> -e <span class="s2">&#34;a is </span><span class="nv">$a</span><span class="s2"> \n&#34;</span>
</code></pre></td></tr></table>
</div>
</div><p>运行结果：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">a is <span class="m">11</span>
</code></pre></td></tr></table>
</div>
</div><p>这里 <code>-e</code> 表示对转义字符进行替换。如果不使用 <code>-e</code> 选项，将会原样输出：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">a is 11<span class="se">\n</span>
</code></pre></td></tr></table>
</div>
</div><p>可以使用 echo 命令的 <code>-E</code> 选项禁止转义，默认也是不转义的；使用 <code>-n</code> 选项可以禁止插入换行符。</p>
<h2 id="命令替换">命令替换</h2>
<p>命令替换是指Shell可以先执行命令，将输出结果暂时保存，在适当的地方输出。</p>
<p>语法：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="sb">`</span><span class="nb">command</span><span class="sb">`</span>
</code></pre></td></tr></table>
</div>
</div><p><strong>注意是反引号，不是单引号，这个键位于 Esc 键下方。</strong></p>
<p>下面的例子中，将命令执行结果保存在变量中：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="cp">#!/bin/bash
</span><span class="cp"></span><span class="nv">DATE</span><span class="o">=</span><span class="sb">`</span>date<span class="sb">`</span>
<span class="nb">echo</span> <span class="s2">&#34;Date is </span><span class="nv">$DATE</span><span class="s2">&#34;</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="变量替换">变量替换</h2>
<p>变量替换可以根据变量的状态（是否为空、是否定义等）来改变它的值。</p>
<p>可以使用的变量替换形式：</p>
<table>
<thead>
<tr>
<th>形式</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>${var}</code></td>
<td>变量本来的值</td>
</tr>
<tr>
<td><code>${var:-word}</code></td>
<td>如果变量 <code>var</code> 为空或已被删除(unset)，那么返回 word，但不改变 <code>var</code> 的值。</td>
</tr>
<tr>
<td><code>${var:=word}</code></td>
<td>如果变量 <code>var</code> 为空或已被删除(unset)，那么返回 word，并将 <code>var</code> 的值设置为 word。</td>
</tr>
<tr>
<td><code>${var:?message}</code></td>
<td>如果变量 <code>var</code> 为空或已被删除(unset)，那么将消息 message 送到标准错误输出，可以用来检测变量 <code>var</code> 是否可以被正常赋值。若此替换出现在Shell脚本中，那么脚本将停止运行。</td>
</tr>
<tr>
<td><code>${var:+word}</code></td>
<td>如果变量 <code>var</code> 被定义，那么返回 word，但不改变 var 的值。</td>
</tr>
</tbody>
</table>
<h2 id="一个完整的shell示例">一个完整的shell示例</h2>
<p>下面的脚本用于php安装过程中安装zip扩展。</p>
<p><code>php_zip_ins.sh</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="cp">#!/bin/bash
</span><span class="cp"></span><span class="c1">#zip install</span>

<span class="k">if</span> <span class="o">[</span> -d php-5.4.25/ext/zip <span class="o">]</span><span class="p">;</span><span class="k">then</span>
	<span class="nb">cd</span> php-5.4.25/ext/zip
<span class="k">else</span>
	tar zxvf php-5.4.25.tar.gz
	<span class="nb">cd</span> php-5.4.25/ext/zip
<span class="k">fi</span>
/usr/local/php/bin/phpize
./configure --with-php-config<span class="o">=</span>/usr/local/php/bin/php-config
make
<span class="o">[</span> <span class="nv">$?</span> !<span class="o">=</span> <span class="m">0</span> <span class="o">]</span> <span class="o">&amp;&amp;</span> <span class="nb">exit</span>
make install
<span class="nb">echo</span> 
grep <span class="s1">&#39;no-debug-zts-20100525&#39;</span> /usr/local/php/etc/php.ini
<span class="k">if</span> <span class="o">[</span> <span class="nv">$?</span> !<span class="o">=</span> <span class="m">0</span> <span class="o">]</span><span class="p">;</span><span class="k">then</span>
        <span class="nb">echo</span> <span class="s1">&#39;&#39;</span> &gt;&gt; /usr/local/php/etc/php.ini
        <span class="nb">echo</span> <span class="s1">&#39;extension_dir=/usr/local/php/lib/php/extensions/no-debug-zts-20100525&#39;</span> &gt;&gt; /usr/local/php/etc/php.ini
<span class="k">fi</span>
grep <span class="s1">&#39;zip.so&#39;</span> /usr/local/php/etc/php.ini
<span class="k">if</span> <span class="o">[</span> <span class="nv">$?</span> !<span class="o">=</span> <span class="m">0</span> <span class="o">]</span><span class="p">;</span><span class="k">then</span>
	<span class="nb">echo</span> <span class="s1">&#39;extension=zip.so&#39;</span> &gt;&gt; /usr/local/php/etc/php.ini
<span class="k">fi</span>
<span class="nb">echo</span> <span class="s2">&#34;zip install is OK&#34;</span>


/usr/local/apache2/bin/apachectl restart
<span class="nb">cd</span> -
rm -rf php-5.4.25
<span class="nb">echo</span> <span class="s2">&#34;all ok!&#34;</span>
ls /usr/local/php/lib/php/extensions/no-debug-zts-20100525/

</code></pre></td></tr></table>
</div>
</div><h1 id="02--shell脚本学习--运算符">02- Shell脚本学习&ndash;运算符</h1>
<h2 id="shell运算符">Shell运算符</h2>
<p>Bash 支持很多运算符，包括算数运算符、关系运算符、布尔运算符、字符串运算符和文件测试运算符。</p>
<h3 id="算术运算符">算术运算符</h3>
<p>原生bash不支持简单的数学运算，但是可以通过其他命令来实现，例如 awk 和 expr，expr 最常用。</p>
<p><code>expr</code> 是一款表达式计算工具，使用它能完成表达式的求值操作。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># 命令行直接计算</span>
expr <span class="m">2</span> + <span class="m">2</span>   <span class="c1">#4</span>
expr <span class="m">3</span> - <span class="m">2</span>   <span class="c1">#1</span>
expr <span class="m">3</span> / <span class="m">2</span>   <span class="c1">#1</span>
expr <span class="m">3</span> <span class="se">\*</span> <span class="m">2</span>   <span class="c1">#6</span>

<span class="c1"># 使用表达式</span>
<span class="nv">a</span><span class="o">=</span><span class="m">10</span>
<span class="nv">b</span><span class="o">=</span><span class="m">20</span>
<span class="nv">val</span><span class="o">=</span><span class="sb">`</span>expr <span class="nv">$a</span> + <span class="nv">$b</span><span class="sb">`</span>
<span class="nb">echo</span> <span class="s2">&#34;a + b : </span><span class="nv">$val</span><span class="s2">&#34;</span>
</code></pre></td></tr></table>
</div>
</div><p>注意：</p>
<ul>
<li><strong>表达式和运算符之间要有空格</strong>，例如 <code>2+2</code> 是不对的，必须写成 <code>2 + 2</code>，这与我们熟悉的大多数编程语言不一样。</li>
<li>乘号(*)前边必须加反斜杠(\)才能实现乘法运算</li>
<li>完整的表达式要被 ` ` 包含，注意这个字符不是常用的单引号，在 Esc 键下边。</li>
</ul>
<p><strong>算术运算符列表</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">运算符	说明	    举例
+	    加法	<span class="sb">`</span>expr <span class="nv">$a</span> + <span class="nv">$b</span><span class="sb">`</span> 结果为 30。
-   	减法	<span class="sb">`</span>expr <span class="nv">$a</span> - <span class="nv">$b</span><span class="sb">`</span> 结果为 10。
*	    乘法	<span class="sb">`</span>expr <span class="nv">$a</span> <span class="se">\*</span> <span class="nv">$b</span><span class="sb">`</span> 结果为  200。
/	    除法	<span class="sb">`</span>expr <span class="nv">$b</span> / <span class="nv">$a</span><span class="sb">`</span> 结果为 2。
%	    取余	<span class="sb">`</span>expr <span class="nv">$b</span> % <span class="nv">$a</span><span class="sb">`</span> 结果为 0。
<span class="o">=</span>	    赋值	<span class="nv">a</span><span class="o">=</span><span class="nv">$b</span> 将把变量 b 的值赋给 a。
<span class="o">==</span>	    相等。用于比较两个数字，相同则返回 true。	<span class="o">[</span> <span class="nv">$a</span> <span class="o">==</span> <span class="nv">$b</span> <span class="o">]</span> 返回 false。
!<span class="o">=</span>	    不相等。用于比较两个数字，不相同则返回 true。	<span class="o">[</span> <span class="nv">$a</span> !<span class="o">=</span> <span class="nv">$b</span> <span class="o">]</span> 返回 true。
</code></pre></td></tr></table>
</div>
</div><h3 id="关系运算符">关系运算符</h3>
<p>关系运算符只支持数字，不支持字符串，除非字符串的值是数字。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="cp">#!/bin/sh
</span><span class="cp"></span><span class="nv">a</span><span class="o">=</span><span class="m">10</span>
<span class="nv">b</span><span class="o">=</span><span class="m">20</span>
<span class="k">if</span> <span class="o">[</span> <span class="nv">$a</span> -eq <span class="nv">$b</span> <span class="o">]</span>
<span class="k">then</span>
   <span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$a</span><span class="s2"> -eq </span><span class="nv">$b</span><span class="s2"> : a is equal to b&#34;</span>
<span class="k">else</span>
   <span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$a</span><span class="s2"> -eq </span><span class="nv">$b</span><span class="s2">: a is not equal to b&#34;</span>
<span class="k">fi</span>
</code></pre></td></tr></table>
</div>
</div><p>缩成一行可以这样：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="nv">a</span><span class="o">=</span>10<span class="p">;</span><span class="nv">b</span><span class="o">=</span>20<span class="p">;</span><span class="k">if</span> <span class="o">[</span> <span class="nv">$a</span> -eq <span class="nv">$b</span> <span class="o">]</span><span class="p">;</span><span class="k">then</span> <span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$a</span><span class="s2"> -eq </span><span class="nv">$b</span><span class="s2"> : a is equal to b&#34;</span><span class="p">;</span> <span class="k">else</span> <span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$a</span><span class="s2"> -eq </span><span class="nv">$b</span><span class="s2">: a is not equal to b&#34;</span><span class="p">;</span> <span class="k">fi</span>
</code></pre></td></tr></table>
</div>
</div><p>这里缩写，主要是为了让大家注意：</p>
<ul>
<li>if后面直到then前面的分号结束，都是有空格的: <code>if [ $a -eq $b ]</code></li>
</ul>
<p><strong>关系运算符列表</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">运算符	说明
-eq	检测两个数是否相等，相等返回 true。同算数运算符<span class="sb">`</span><span class="o">==</span><span class="sb">`</span>
-ne	检测两个数是否相等，不相等返回 <span class="nb">true</span>
-gt	检测左边的数是否大于右边的，如果是，则返回 true。
-lt	检测左边的数是否小于右边的，如果是，则返回 true。
-ge	检测左边的数是否大等于右边的，如果是，则返回 true。
-le	检测左边的数是否小于等于右边的，如果是，则返回 true。

</code></pre></td></tr></table>
</div>
</div><h2 id="布尔运算符">布尔运算符</h2>
<p><strong>布尔运算符列表</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">运算符	说明
!	非运算，表达式为 <span class="nb">true</span> 则返回 false，否则返回 true。
-o	或运算<span class="o">(</span>or<span class="o">)</span>，有一个表达式为 <span class="nb">true</span> 则返回 true。
-a	与运算<span class="o">(</span>and<span class="o">)</span>，两个表达式都为 <span class="nb">true</span> 才返回 true。
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="k">if</span> <span class="o">[</span> <span class="m">3</span> -eq <span class="m">3</span> -a <span class="m">3</span> -lt <span class="m">5</span> <span class="o">]</span>
<span class="k">then</span>
    <span class="nb">echo</span> <span class="s1">&#39;ok&#39;</span>
<span class="k">fi</span><span class="p">;</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="字符串运算符">字符串运算符</h2>
<p><strong>字符串运算符列表</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">运算符	说明	<span class="nv">举例</span>
<span class="o">=</span>	检测两个字符串是否相等，相等返回 true。	<span class="o">[</span> <span class="nv">$a</span> <span class="o">=</span> <span class="nv">$b</span> <span class="o">]</span> 返回 false。
!<span class="o">=</span>	检测两个字符串是否相等，不相等返回 true。	<span class="o">[</span> <span class="nv">$a</span> !<span class="o">=</span> <span class="nv">$b</span> <span class="o">]</span> 返回 true。
-z	检测字符串长度是否为0，为0返回 true。	<span class="o">[</span> -z <span class="nv">$a</span> <span class="o">]</span> 返回 false。
-n	检测字符串长度是否为0，不为0返回 true。	<span class="o">[</span> -n <span class="nv">$a</span> <span class="o">]</span> 返回 true。
str	检测字符串是否为空，不为空返回 true。	<span class="o">[</span> <span class="nv">$a</span> <span class="o">]</span> 返回 true。
</code></pre></td></tr></table>
</div>
</div><h2 id="文件测试运算符">文件测试运算符</h2>
<p>文件测试运算符用于检测 Unix 文件的各种属性。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="cp">#!/bin/sh
</span><span class="cp"></span><span class="nv">file</span><span class="o">=</span><span class="s2">&#34;/tmp/test.sh&#34;</span>

<span class="k">if</span> <span class="o">[</span> -e <span class="nv">$file</span> <span class="o">]</span>
<span class="k">then</span>
   <span class="nb">echo</span> <span class="s2">&#34;File exists&#34;</span>
<span class="k">else</span>
   <span class="nb">echo</span> <span class="s2">&#34;File does not exist&#34;</span>
<span class="k">fi</span>
</code></pre></td></tr></table>
</div>
</div><p>文件测试运算符列表</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">操作符	说明	举例

-b file	检测文件是否是块设备文件，如果是，则返回 true。	<span class="o">[</span> -b <span class="nv">$file</span> <span class="o">]</span> 返回 false。

-c file	检测文件是否是字符设备文件，如果是，则返回 true。	<span class="o">[</span> -c <span class="nv">$file</span> <span class="o">]</span> 返回 false。

-d file	检测文件是否是目录，如果是，则返回 true。	<span class="o">[</span> -d <span class="nv">$file</span> <span class="o">]</span> 返回 false。

-f file	检测文件是否是普通文件（既不是目录，也不是设备文件），如果是，则返回 true。	<span class="o">[</span> -f <span class="nv">$file</span> <span class="o">]</span> 返回 true。

-g file	检测文件是否设置了 SGID 位，如果是，则返回 true。	<span class="o">[</span> -g <span class="nv">$file</span> <span class="o">]</span> 返回 false。

-k file	检测文件是否设置了粘着位<span class="o">(</span>Sticky Bit<span class="o">)</span>，如果是，则返回 true。	<span class="o">[</span> -k <span class="nv">$file</span> <span class="o">]</span> 返回 false。

-p file	检测文件是否是具名管道，如果是，则返回 true。	<span class="o">[</span> -p <span class="nv">$file</span> <span class="o">]</span> 返回 false。

-u file	检测文件是否设置了 SUID 位，如果是，则返回 true。	<span class="o">[</span> -u <span class="nv">$file</span> <span class="o">]</span> 返回 false。

-r file	检测文件是否可读，如果是，则返回 true。	<span class="o">[</span> -r <span class="nv">$file</span> <span class="o">]</span> 返回 true。

-w file	检测文件是否可写，如果是，则返回 true。	<span class="o">[</span> -w <span class="nv">$file</span> <span class="o">]</span> 返回 true。

-x file	检测文件是否可执行，如果是，则返回 true。	<span class="o">[</span> -x <span class="nv">$file</span> <span class="o">]</span> 返回 true。

-s file	检测文件是否为空（文件大小是否大于0），不为空返回 true。	<span class="o">[</span> -s <span class="nv">$file</span> <span class="o">]</span> 返回 true。

-e file	检测文件（包括目录）是否存在，如果是，则返回 true。	<span class="o">[</span> -e <span class="nv">$file</span> <span class="o">]</span> 返回 true。
</code></pre></td></tr></table>
</div>
</div><h1 id="03--shell脚本学习--字符串和数组">03- Shell脚本学习&ndash;字符串和数组</h1>
<h2 id="字符串">字符串</h2>
<p>字符串是shell编程中最常用最有用的数据类型（除了数字和字符串，也没啥其它类型好用了），字符串可以用单引号，也可以用双引号，也可以不用引号。单双引号的区别跟PHP类似：</p>
<p>单双引号的区别：</p>
<ul>
<li>双引号里可以有变量，单引号则原样输出；</li>
<li>双引号里可以出现转义字符，单引号则原样输出；</li>
<li>单引号字串中不能出现单引号。</li>
</ul>
<h3 id="拼接字符串">拼接字符串</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="cp">#!/bin/bash
</span><span class="cp"></span>
<span class="nv">str1</span><span class="o">=</span><span class="s1">&#39;i&#39;</span>
<span class="nv">str2</span><span class="o">=</span><span class="s1">&#39;love&#39;</span>
<span class="nv">str3</span><span class="o">=</span><span class="s1">&#39;you&#39;</span>

<span class="nb">echo</span> <span class="nv">$str1</span> <span class="nv">$str2</span> <span class="nv">$str3</span>
<span class="nb">echo</span> <span class="nv">$str1$str2$str3</span>
<span class="nb">echo</span> <span class="nv">$str1</span>,<span class="nv">$str2</span>,<span class="nv">$str3</span>
</code></pre></td></tr></table>
</div>
</div><p>输出：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">i love you
iloveyou
i,love,you
</code></pre></td></tr></table>
</div>
</div><h3 id="获取字符串长度">获取字符串长度</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="cp">#!/bin/bash/
</span><span class="cp"></span>
<span class="nv">str</span><span class="o">=</span><span class="s1">&#39;i love you&#39;</span>

<span class="nb">echo</span> <span class="si">${#</span><span class="nv">str</span><span class="si">}</span>

<span class="c1"># 输出：10</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="截取字符串">截取字符串</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="cp">#!/bin/bash/
</span><span class="cp"></span>
<span class="nv">str</span><span class="o">=</span><span class="s1">&#39;i love you&#39;</span>

<span class="nb">echo</span> <span class="si">${</span><span class="nv">str</span><span class="p">:</span><span class="nv">1</span><span class="si">}</span> <span class="c1"># 从第1个截取到末尾。注意从0开始。</span>
<span class="nb">echo</span> <span class="si">${</span><span class="nv">str</span><span class="p">:</span><span class="nv">2</span><span class="p">:</span><span class="nv">2</span><span class="si">}</span> <span class="c1"># 从第2个截取2个。</span>
<span class="nb">echo</span> <span class="si">${</span><span class="nv">str</span><span class="p">:</span><span class="nv">0</span><span class="si">}</span> <span class="c1"># 全部截取。</span>
<span class="nb">echo</span> <span class="si">${</span><span class="nv">str</span><span class="k">:-</span><span class="nv">3</span><span class="si">}</span> <span class="c1"># 负数无效，视为0。</span>
</code></pre></td></tr></table>
</div>
</div><p>输出：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">love you
lo
i love you
i love you
</code></pre></td></tr></table>
</div>
</div><h3 id="查找字符串">查找字符串</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="cp">#!/bin/bash/
</span><span class="cp"></span>
<span class="nv">str</span><span class="o">=</span><span class="s2">&#34;i love you&#34;</span>

<span class="nb">echo</span> <span class="sb">`</span>expr index <span class="s2">&#34;</span><span class="nv">$str</span><span class="s2">&#34;</span> l<span class="sb">`</span>
<span class="nb">echo</span> <span class="sb">`</span>expr index <span class="s2">&#34;</span><span class="nv">$str</span><span class="s2">&#34;</span> you<span class="sb">`</span> <span class="c1">#最后一个参数是字符，会对后面字符串每一个单独查找，返回最靠前的index</span>
<span class="nb">echo</span> <span class="sb">`</span>expr index <span class="s2">&#34;</span><span class="nv">$str</span><span class="s2">&#34;</span> o<span class="sb">`</span>
<span class="nb">echo</span> <span class="sb">`</span>expr length <span class="s2">&#34;</span><span class="nv">$str</span><span class="s2">&#34;</span><span class="sb">`</span> <span class="c1">#字符串长度</span>
<span class="nb">echo</span> <span class="sb">`</span>expr substr <span class="s2">&#34;</span><span class="nv">$str</span><span class="s2">&#34;</span> <span class="m">1</span> 6<span class="sb">`</span> <span class="c1">#从字符串中位置1开始截取6个字符。索引是从0开始的。</span>
</code></pre></td></tr></table>
</div>
</div><p>输出:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">3
4
4
10
i love
</code></pre></td></tr></table>
</div>
</div><p>注意字符串变量需要加双引号。第2个例子里<code>you</code>虽然<code>y</code>的index是8,但是<code>o</code>在前面已经出现过,index是4，最终取所有字符里最靠前的index。</p>
<p>*拓展：<code>expr</code>更多关于字符串用法：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">STRING : REGEXP   anchored pattern match of REGEXP in STRING

match STRING REGEXP        same as STRING : REGEXP

substr STRING POS LENGTH   <span class="c1">#从STRING中POS位置开始截取LENGTH个字符。POS索引是从1开始的。</span>

index STRING CHARS         <span class="c1">#在STRING中查找字符CHARS首次出现的位置，没有找到返回0</span>

length STRING              <span class="c1">#字符串长度</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="数组">数组</h2>
<p>bash支持一维数组（不支持多维数组），并且没有限定数组的大小。类似与C语言，数组元素的下标由0开始编号。获取数组中的元素要利用下标，下标可以是整数或算术表达式，其值应大于或等于0。</p>
<p>在Shell中，用括号来表示数组，数组元素用<code>空格</code>符号分割开。定义数组的一般形式为：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="nv">array_name</span><span class="o">=(</span>value1 value2 ... valuen<span class="o">)</span>
</code></pre></td></tr></table>
</div>
</div><p>例如：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="nv">array_name</span><span class="o">=(</span>value0 value1 value2 value3<span class="o">)</span>
</code></pre></td></tr></table>
</div>
</div><p>或者</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="nv">array_name</span><span class="o">=(</span>
    value0
    value1
    value2
    value3
<span class="o">)</span>
</code></pre></td></tr></table>
</div>
</div><p>还可以单独定义数组的各个分量：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">array_name<span class="o">[</span>0<span class="o">]=</span>value0
array_name<span class="o">[</span>1<span class="o">]=</span>value1
array_name<span class="o">[</span>2<span class="o">]=</span>value2
</code></pre></td></tr></table>
</div>
</div><p>可以不使用连续的下标，而且下标的范围没有限制。</p>
<p>下面来读取数组：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="nb">echo</span> <span class="si">${</span><span class="nv">array_name</span><span class="p">[2]</span><span class="si">}</span> <span class="c1">#读取下标为2的元素</span>
<span class="nb">echo</span> <span class="si">${</span><span class="nv">array_name</span><span class="p">[*]</span><span class="si">}</span> <span class="c1">#读取所有元素</span>
<span class="nb">echo</span> <span class="si">${</span><span class="nv">array_name</span><span class="p">[@]</span><span class="si">}</span> <span class="c1">#读取所有元素</span>


<span class="nb">echo</span> <span class="si">${#</span><span class="nv">array_name</span><span class="p">[*]</span><span class="si">}</span> <span class="c1">#获取数组长度</span>
<span class="nb">echo</span> <span class="si">${#</span><span class="nv">array_name</span><span class="p">[@]</span><span class="si">}</span> <span class="c1">#获取数组长度</span>
<span class="nb">echo</span> <span class="si">${#</span><span class="nv">array_name</span><span class="p">[1]</span><span class="si">}</span> <span class="c1">#获取数组中单个元素的长度</span>
</code></pre></td></tr></table>
</div>
</div><p>输出：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">value2
value0 value1 value2 value3
value0 value1 value2 value3
<span class="m">4</span>
<span class="m">4</span>
<span class="m">6</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="总结">总结</h2>
<p>对比shell里字符串和数组，我们发现：</p>
<p>字符串</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="nv">str</span><span class="o">=</span><span class="s2">&#34;hello&#34;</span>
<span class="si">${#</span><span class="nv">str</span><span class="si">}</span> <span class="c1"># 读取字符串长度</span>
<span class="nb">echo</span> <span class="si">${</span><span class="nv">str</span><span class="si">}</span> <span class="c1"># 读取字符串全部</span>
<span class="nb">echo</span> <span class="si">${</span><span class="nv">str</span><span class="p">:</span><span class="nv">1</span><span class="si">}</span> <span class="c1"># 截取字符串</span>
</code></pre></td></tr></table>
</div>
</div><p>数组：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="nv">arr</span><span class="o">=(</span>a1 a2 a3<span class="o">)</span>
<span class="nb">echo</span> <span class="si">${#</span><span class="nv">arr</span><span class="p">[*]</span><span class="si">}</span> <span class="c1"># 读取数组长度</span>
<span class="nb">echo</span> <span class="si">${#</span><span class="nv">arr</span><span class="p">[1]</span><span class="si">}</span> <span class="c1"># 读取数组某个元素长度</span>

<span class="nb">echo</span> <span class="si">${</span><span class="nv">arr</span><span class="p">[*]</span><span class="si">}</span> <span class="c1"># 读取数组全部</span>
<span class="nb">echo</span> <span class="si">${</span><span class="nv">arr</span><span class="p">[1]</span><span class="si">}</span> <span class="c1"># 读取数组某个元素</span>
</code></pre></td></tr></table>
</div>
</div><p><code>${#ele*}</code>用来读取ele元素长度属性
<code>${ele*}</code>用来读取或操作ele元素</p>
<h1 id="04--shell脚本学习--条件控制">04- Shell脚本学习&ndash;条件控制</h1>
<h2 id="条件判断if语句">条件判断：if语句</h2>
<p>语法格式：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="k">if</span> <span class="o">[</span> expression <span class="o">]</span>
<span class="k">then</span>
   Statement<span class="o">(</span>s<span class="o">)</span> to be executed <span class="k">if</span> expression is <span class="nb">true</span>
<span class="k">fi</span>
</code></pre></td></tr></table>
</div>
</div><p>注意：<code>expression</code> 和方括号([ ])之间必须有空格，否则会有语法错误。</p>
<p>if 语句通过关系运算符判断表达式的真假来决定执行哪个分支。Shell 有三种 if &hellip; else 语句：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="k">if</span> ... <span class="k">fi</span> 语句
<span class="k">if</span> ... <span class="k">else</span> ... <span class="k">fi</span> 语句
<span class="k">if</span> ... <span class="k">elif</span> ... <span class="k">else</span> ... <span class="k">fi</span> 语句
</code></pre></td></tr></table>
</div>
</div><p>示例：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="cp">#!/bin/bash/
</span><span class="cp"></span>
<span class="nv">a</span><span class="o">=</span><span class="m">10</span>
<span class="nv">b</span><span class="o">=</span><span class="m">20</span>
<span class="k">if</span> <span class="o">[</span> <span class="nv">$a</span> <span class="o">==</span> <span class="nv">$b</span> <span class="o">]</span>
<span class="k">then</span> 
	<span class="nb">echo</span> <span class="s2">&#34;a is equal to b&#34;</span>
<span class="k">elif</span> <span class="o">[</span> <span class="nv">$a</span> -gt <span class="nv">$b</span> <span class="o">]</span>
<span class="k">then</span>
	<span class="nb">echo</span> <span class="s2">&#34;a is greater to b&#34;</span>
<span class="k">else</span>
	<span class="nb">echo</span> <span class="s2">&#34;a is less to b&#34;</span>
<span class="k">fi</span>
</code></pre></td></tr></table>
</div>
</div><p><code>if ... else</code> 语句也可以写成一行，以命令的方式来运行:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="nv">a</span><span class="o">=</span>10<span class="p">;</span><span class="nv">b</span><span class="o">=</span>20<span class="p">;</span><span class="k">if</span> <span class="o">[</span> <span class="nv">$a</span> <span class="o">==</span> <span class="nv">$b</span> <span class="o">]</span><span class="p">;</span><span class="k">then</span> <span class="nb">echo</span> <span class="s2">&#34;a is equal to b&#34;</span><span class="p">;</span><span class="k">else</span> <span class="nb">echo</span> <span class="s2">&#34;a is not equal to b&#34;</span><span class="p">;</span><span class="k">fi</span><span class="p">;</span>
</code></pre></td></tr></table>
</div>
</div><p><code>if ... else</code> 语句也经常与 <code>test</code> 命令结合使用，作用与上面一样：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="cp">#!/bin/bash/
</span><span class="cp"></span>
<span class="nv">a</span><span class="o">=</span><span class="m">10</span>
<span class="nv">b</span><span class="o">=</span><span class="m">20</span>
<span class="k">if</span> <span class="nb">test</span> <span class="nv">$a</span> <span class="o">==</span> <span class="nv">$b</span> 
<span class="k">then</span> 
	<span class="nb">echo</span> <span class="s2">&#34;a is equal to b&#34;</span>
<span class="k">else</span>
	<span class="nb">echo</span> <span class="s2">&#34;a is not equal to b&#34;</span>
<span class="k">fi</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="分支控制case语句">分支控制：case语句</h2>
<p><code>case ... esac</code> 与其他语言中的 <code>switch ... case</code> 语句类似，是一种多分枝选择结构。</p>
<p>示例：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="cp">#!/bin/bash/
</span><span class="cp"></span>
<span class="nv">grade</span><span class="o">=</span><span class="s2">&#34;B&#34;</span>

<span class="k">case</span> <span class="nv">$grade</span> in 
	<span class="s2">&#34;A&#34;</span><span class="o">)</span> <span class="nb">echo</span> <span class="s2">&#34;Very Good!&#34;</span><span class="p">;;</span>
	<span class="s2">&#34;B&#34;</span><span class="o">)</span> <span class="nb">echo</span> <span class="s2">&#34;Good!&#34;</span><span class="p">;;</span>
	<span class="s2">&#34;C&#34;</span><span class="o">)</span> <span class="nb">echo</span> <span class="s2">&#34;Come On!&#34;</span><span class="p">;;</span>
	*<span class="o">)</span> 
		<span class="nb">echo</span> <span class="s2">&#34;You Must Try!&#34;</span>
		<span class="nb">echo</span> <span class="s2">&#34;Sorry!&#34;</span><span class="p">;;</span>
<span class="k">esac</span>
</code></pre></td></tr></table>
</div>
</div><p>转换成C语言是：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-c" data-lang="c"><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
</span><span class="cp"></span><span class="kt">int</span> <span class="nf">main</span><span class="p">(){</span>
    <span class="kt">char</span> <span class="n">grade</span> <span class="o">=</span> <span class="sc">&#39;B&#39;</span><span class="p">;</span>
    <span class="k">switch</span><span class="p">(</span><span class="n">grade</span><span class="p">){</span>
        <span class="k">case</span> <span class="sc">&#39;A&#39;</span><span class="o">:</span> <span class="n">printf</span><span class="p">(</span><span class="s">&#34;Very Good!&#34;</span><span class="p">);</span><span class="k">break</span><span class="p">;</span>
        <span class="k">case</span> <span class="sc">&#39;B&#39;</span><span class="o">:</span> <span class="n">printf</span><span class="p">(</span><span class="s">&#34;Very Good!&#34;</span><span class="p">);</span><span class="k">break</span><span class="p">;</span>
        <span class="k">case</span> <span class="sc">&#39;C&#39;</span><span class="o">:</span> <span class="n">printf</span><span class="p">(</span><span class="s">&#34;Very Good!&#34;</span><span class="p">);</span><span class="k">break</span><span class="p">;</span>
        <span class="k">default</span><span class="o">:</span> 
            <span class="n">printf</span><span class="p">(</span><span class="s">&#34;You Must Try!&#34;</span><span class="p">);</span>
            <span class="n">printf</span><span class="p">(</span><span class="s">&#34;Sorry!&#34;</span><span class="p">);</span>
            <span class="k">break</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

</code></pre></td></tr></table>
</div>
</div><p>对比看就很容易理解了。很相似，只是格式不一样。</p>
<p>需要注意的是：
**取值后面必须为关键字 in，每一模式必须以右括号结束。取值可以为变量或常数。匹配发现取值符合某一模式后，其间所有命令开始执行直至 <code>;;</code>。**<code>;;</code> 与其他语言中的 <code>break</code> 类似，意思是跳到整个 <code>case</code> 语句的最后。</p>
<p>取值将检测匹配的每一个模式。一旦模式匹配，则执行完匹配模式相应命令后不再继续其他模式。如果无一匹配模式，使用星号 <code>*</code> 捕获该值，再执行后面的命令。</p>
<p>再举一个例子：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="cp">#!/bin/bash
</span><span class="cp"></span><span class="nv">option</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">1</span><span class="si">}</span><span class="s2">&#34;</span>
<span class="k">case</span> <span class="si">${</span><span class="nv">option</span><span class="si">}</span> in
   <span class="s2">&#34;-f&#34;</span><span class="o">)</span> <span class="nv">FILE</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">2</span><span class="si">}</span><span class="s2">&#34;</span>
      <span class="nb">echo</span> <span class="s2">&#34;File name is </span><span class="nv">$FILE</span><span class="s2">&#34;</span>
      <span class="p">;;</span>
   <span class="s2">&#34;-d&#34;</span><span class="o">)</span> <span class="nv">DIR</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">2</span><span class="si">}</span><span class="s2">&#34;</span>
      <span class="nb">echo</span> <span class="s2">&#34;Dir name is </span><span class="nv">$DIR</span><span class="s2">&#34;</span>
      <span class="p">;;</span>
   *<span class="o">)</span> 
      <span class="nb">echo</span> <span class="s2">&#34;`basename </span><span class="si">${</span><span class="nv">0</span><span class="si">}</span><span class="s2">`:usage: [-f file] | [-d directory]&#34;</span>
      <span class="nb">exit</span> <span class="m">1</span> <span class="c1"># Command to come out of the program with status 1</span>
      <span class="p">;;</span>
<span class="k">esac</span>
</code></pre></td></tr></table>
</div>
</div><p>运行结果：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">$./test.sh
test.sh: usage: <span class="o">[</span> -f filename <span class="o">]</span> <span class="p">|</span> <span class="o">[</span> -d directory <span class="o">]</span>

./test.sh -f index.html
File name is index.html
</code></pre></td></tr></table>
</div>
</div><p>这里用到了特殊变量<code>${1}</code>,指的是获取命令行的第一个参数。</p>
<p>下面结合<code>getopts</code>命令介绍下一个经典的例子：从命令行读取参数。</p>
<p>run.sh</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="cp">#!/bin/sh
</span><span class="cp"></span>
usage<span class="o">()</span>
<span class="o">{</span>
    <span class="nb">echo</span> <span class="s2">&#34;Usage: </span><span class="nv">$0</span><span class="s2"> -s [start|stop|reload|restart] -e [online|test]&#34;</span>
    <span class="nb">exit</span> <span class="m">1</span>
<span class="o">}</span>

<span class="k">if</span> <span class="o">[</span> -z <span class="nv">$1</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
    usage
<span class="k">fi</span>

<span class="k">while</span> <span class="nb">getopts</span> <span class="s1">&#39;s:e:h&#39;</span> OPT<span class="p">;</span> <span class="k">do</span>
    <span class="k">case</span> <span class="nv">$OPT</span> in
        s<span class="o">)</span> <span class="nv">cmd</span><span class="o">=</span><span class="s2">&#34;</span><span class="nv">$OPTARG</span><span class="s2">&#34;</span><span class="p">;;</span>
        e<span class="o">)</span> <span class="nv">env</span><span class="o">=</span><span class="s2">&#34;</span><span class="nv">$OPTARG</span><span class="s2">&#34;</span><span class="p">;;</span>
        h<span class="o">)</span> usage<span class="p">;;</span>
        ?<span class="o">)</span> usage<span class="p">;;</span>
    <span class="k">esac</span>
<span class="k">done</span>

<span class="nb">echo</span> <span class="nv">$cmd</span>
<span class="nb">echo</span> <span class="nv">$env</span>
</code></pre></td></tr></table>
</div>
</div><p>当我们直接运行<code>run.sh</code>的时候，会调用<code>usage</code>显示帮助；如果输入正确的参数，则会进入正确的流程。运行示例：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">sh run.sh -s start -e <span class="nb">test</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="for循环">for循环</h2>
<p>shell的for循环与c、php等语言不同，同Python很类似。下面是语法格式：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="k">for</span> 变量 in 列表
<span class="k">do</span>
    command1
    command2
    ...
    commandN
<span class="k">done</span>
</code></pre></td></tr></table>
</div>
</div><p>示例：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="cp">#!/bin/bash/
</span><span class="cp"></span>
<span class="k">for</span> value in <span class="m">1</span> <span class="m">2</span> <span class="m">3</span> <span class="m">4</span> <span class="m">5</span>
<span class="k">do</span> 
	<span class="nb">echo</span> <span class="s2">&#34;The value is </span><span class="nv">$value</span><span class="s2">&#34;</span>
<span class="k">done</span>
</code></pre></td></tr></table>
</div>
</div><p>输出：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">The value is <span class="m">1</span>
The value is <span class="m">2</span>
The value is <span class="m">3</span>
The value is <span class="m">4</span>
The value is <span class="m">5</span>
</code></pre></td></tr></table>
</div>
</div><p>顺序输出字符串中的字符：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="k">for</span> str in <span class="s1">&#39;This is a string&#39;</span>
<span class="k">do</span>
    <span class="nb">echo</span> <span class="nv">$str</span>
<span class="k">done</span>
</code></pre></td></tr></table>
</div>
</div><p>运行结果：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">This is a string
</code></pre></td></tr></table>
</div>
</div><p>遍历目录下的文件：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="cp">#!/bin/bash
</span><span class="cp"></span><span class="k">for</span> FILE in *
<span class="k">do</span>
   <span class="nb">echo</span> <span class="nv">$FILE</span>
<span class="k">done</span>
</code></pre></td></tr></table>
</div>
</div><p>上面的代码将遍历当前目录下所有的文件。在Linux下，可以改为其他目录试试。</p>
<p>遍历文件内容：
city.txt</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">beijing
tianjin
shanghai
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="cp">#!/bin/bash
</span><span class="cp"></span>
<span class="nv">citys</span><span class="o">=</span><span class="sb">`</span>cat city.txt<span class="sb">`</span>
<span class="k">for</span> city in <span class="nv">$citys</span>
<span class="k">do</span>
   <span class="nb">echo</span> <span class="nv">$city</span>
<span class="k">done</span>
</code></pre></td></tr></table>
</div>
</div><p>输出：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">beijing
tianjin
shanghai
</code></pre></td></tr></table>
</div>
</div><h2 id="while循环">while循环</h2>
<p>只要while后面的条件满足，就一直执行do里面的代码块。</p>
<p>其格式为：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="k">while</span> <span class="nb">command</span>
<span class="k">do</span>
   Statement<span class="o">(</span>s<span class="o">)</span> to be executed <span class="k">if</span> <span class="nb">command</span> is <span class="nb">true</span>
<span class="k">done</span>
</code></pre></td></tr></table>
</div>
</div><p>命令执行完毕，控制返回循环顶部，从头开始直至测试条件为假。</p>
<p>示例：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="cp">#!/bin/bash
</span><span class="cp"></span>
<span class="nv">c</span><span class="o">=</span>0<span class="p">;</span>
<span class="k">while</span> <span class="o">[</span> <span class="nv">$c</span> -lt <span class="m">3</span> <span class="o">]</span>
<span class="k">do</span>
	<span class="nb">echo</span> <span class="s2">&#34;Value c is </span><span class="nv">$c</span><span class="s2">&#34;</span>
	<span class="nv">c</span><span class="o">=</span><span class="sb">`</span>expr <span class="nv">$c</span> + 1<span class="sb">`</span>
<span class="k">done</span>
</code></pre></td></tr></table>
</div>
</div><p>输出：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">Value c is 0
Value c is 1
Value c is 2
</code></pre></td></tr></table>
</div>
</div><p>这里由于shell本身不支持算数运算，所以使用<code>expr</code>命令进行自增。</p>
<h2 id="until循环">until循环</h2>
<p>until 循环执行一系列命令直至条件为 true 时停止。until 循环与 while 循环在处理方式上刚好相反。一般while循环优于until循环，但在某些时候，也只是极少数情况下，until 循环更加有用。</p>
<p>将上面while循环的例子改改，就能达到一样的效果：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="cp">#!/bin/bash
</span><span class="cp"></span>
<span class="nv">c</span><span class="o">=</span>0<span class="p">;</span>
<span class="k">until</span> <span class="o">[</span> <span class="nv">$c</span> -eq <span class="m">3</span> <span class="o">]</span>
<span class="k">do</span>
	<span class="nb">echo</span> <span class="s2">&#34;Value c is </span><span class="nv">$c</span><span class="s2">&#34;</span>
	<span class="nv">c</span><span class="o">=</span><span class="sb">`</span>expr <span class="nv">$c</span> + 1<span class="sb">`</span>
<span class="k">done</span>
</code></pre></td></tr></table>
</div>
</div><p>首先do里面的语句块一直在运行，直到满足了until的条件就停止。</p>
<p>输出：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">Value c is 0
Value c is 1
Value c is 2
</code></pre></td></tr></table>
</div>
</div><h2 id="跳出循环">跳出循环</h2>
<p>在循环过程中，有时候需要在未达到循环结束条件时强制跳出循环，像大多数编程语言一样，Shell也使用 break 和 continue 来跳出循环。</p>
<h3 id="break">break</h3>
<p>break命令允许跳出所有循环（终止执行后面的所有循环）。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="cp">#!/bin/bash
</span><span class="cp"></span>
<span class="nv">i</span><span class="o">=</span><span class="m">0</span>
<span class="k">while</span> <span class="o">[</span> <span class="nv">$i</span> -lt <span class="m">5</span> <span class="o">]</span>
<span class="k">do</span>
	<span class="nv">i</span><span class="o">=</span><span class="sb">`</span>expr <span class="nv">$i</span> + 1<span class="sb">`</span>

	<span class="k">if</span> <span class="o">[</span> <span class="nv">$i</span> <span class="o">==</span> <span class="m">3</span> <span class="o">]</span>
		<span class="k">then</span>
			<span class="nb">break</span>
	<span class="k">fi</span>
	<span class="nb">echo</span> -e <span class="nv">$i</span>
<span class="k">done</span>
</code></pre></td></tr></table>
</div>
</div><p>运行结果：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">1
2
</code></pre></td></tr></table>
</div>
</div><p>在嵌套循环中，break 命令后面还可以跟一个整数，表示跳出第几层循环。例如：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="nb">break</span> n
</code></pre></td></tr></table>
</div>
</div><p>表示跳出第 n 层循环。</p>
<h2 id="continue">continue</h2>
<p>continue命令与break命令类似，只有一点差别，它不会跳出所有循环，仅仅跳出当前循环。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="cp">#!/bin/bash
</span><span class="cp"></span>
<span class="nv">i</span><span class="o">=</span><span class="m">0</span>
<span class="k">while</span> <span class="o">[</span> <span class="nv">$i</span> -lt <span class="m">5</span> <span class="o">]</span>
<span class="k">do</span>
	<span class="nv">i</span><span class="o">=</span><span class="sb">`</span>expr <span class="nv">$i</span> + 1<span class="sb">`</span>

	<span class="k">if</span> <span class="o">[</span> <span class="nv">$i</span> <span class="o">==</span> <span class="m">3</span> <span class="o">]</span>
		<span class="k">then</span>
			<span class="k">continue</span>
	<span class="k">fi</span>
	<span class="nb">echo</span> -e <span class="nv">$i</span>
	
<span class="k">done</span>
</code></pre></td></tr></table>
</div>
</div><p>运行结果：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">1
2
4
5
</code></pre></td></tr></table>
</div>
</div><h1 id="05--shell脚本学习--函数">05- Shell脚本学习&ndash;函数</h1>
<p>函数可以让我们将一个复杂功能划分成若干模块，让程序结构更加清晰，代码重复利用率更高。像其他编程语言一样，Shell 也支持函数。Shell 函数必须先定义后使用。</p>
<h2 id="函数定义">函数定义</h2>
<p>Shell 函数的定义格式如下：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="k">function</span> function_name <span class="o">()</span> <span class="o">{</span>
    list of commands
    <span class="o">[</span> <span class="k">return</span> value <span class="o">]</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>其中<code>function</code>关键字是可选的。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="cp">#!/bin/bash
</span><span class="cp"></span>
hello<span class="o">(){</span>
	<span class="nb">echo</span> <span class="s1">&#39;hello&#39;</span><span class="p">;</span>
<span class="o">}</span>

hello
</code></pre></td></tr></table>
</div>
</div><p>运行结果：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">hello
</code></pre></td></tr></table>
</div>
</div><p>调用函数只需要给出函数名，不需要加括号。</p>
<p>函数返回值，可以显式增加return语句；如果不加，会将最后一条命令运行结果作为返回值。</p>
<p>Shell 函数返回值只能是整数，一般用来表示函数执行成功与否，0表示成功，其他值表示失败。如果 return 其他数据，比如一个字符串，往往会得到错误提示：<code>numeric argument required</code>。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="cp">#!/bin/bash
</span><span class="cp"></span>
<span class="k">function</span> hello<span class="o">(){</span>
	<span class="k">return</span> <span class="s1">&#39;hello&#39;</span><span class="p">;</span>
<span class="o">}</span>

hello
</code></pre></td></tr></table>
</div>
</div><p>运行结果：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">line 4: <span class="k">return</span>: hello: numeric argument required
</code></pre></td></tr></table>
</div>
</div><p>如果一定要让函数返回字符串，那么可以先定义一个变量，用来接收函数的计算结果，脚本在需要的时候访问这个变量来获得函数返回值。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="cp">#!/bin/bash
</span><span class="cp"></span>
<span class="k">function</span> hello<span class="o">(){</span>
	<span class="k">return</span> <span class="s1">&#39;hello&#39;</span><span class="p">;</span>
<span class="o">}</span>

<span class="nv">str</span><span class="o">=</span>hello

<span class="nb">echo</span> <span class="nv">$str</span>
</code></pre></td></tr></table>
</div>
</div><p>运行结果：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">hello
</code></pre></td></tr></table>
</div>
</div><p>像删除变量一样，删除函数也可以使用 <code>unset</code> 命令，不过要加上 <code>.f</code> 选项，如下所示：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="nv">$unset</span> .f function_name
</code></pre></td></tr></table>
</div>
</div><p>如果你希望直接从终端调用函数，可以将函数定义在主目录下的 .profile 文件，这样每次登录后，在命令提示符后面输入函数名字就可以立即调用。</p>
<h2 id="函数参数">函数参数</h2>
<p>在Shell中，调用函数时可以向其传递参数。在函数体内部，通过 <code>$n</code> 的形式来获取参数的值，例如，<code>$1</code>表示第一个参数，<code>$2</code>表示第二个参数&hellip;这就是前面讲的特殊变量。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="cp">#!/bin/bash
</span><span class="cp"></span>
<span class="k">function</span> sum<span class="o">(){</span>
	<span class="k">case</span> <span class="nv">$#</span> in 
		0<span class="o">)</span> <span class="nb">echo</span> <span class="s2">&#34;no param&#34;</span><span class="p">;;</span>
		1<span class="o">)</span> <span class="nb">echo</span> <span class="nv">$1</span><span class="p">;;</span>
		2<span class="o">)</span> <span class="nb">echo</span> <span class="sb">`</span>expr <span class="nv">$1</span> + <span class="nv">$2</span><span class="sb">`</span><span class="p">;;</span>
		3<span class="o">)</span> <span class="nb">echo</span> <span class="sb">`</span>expr <span class="nv">$1</span> + <span class="nv">$2</span> + <span class="nv">$3</span><span class="sb">`</span><span class="p">;;</span>
		*<span class="o">)</span> <span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$#</span><span class="s2"> params! It&#39;s too much!&#34;</span><span class="p">;;</span>
	<span class="k">esac</span>
<span class="o">}</span>

sum <span class="m">1</span> <span class="m">3</span> <span class="m">5</span> <span class="m">6</span>
</code></pre></td></tr></table>
</div>
</div><p>运行结果：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">4 params! It&#39;s too much!
</code></pre></td></tr></table>
</div>
</div><p>注意，<code>$10</code> 不能获取第十个参数，获取第十个参数需要<code>${10}</code>。当<code>n&gt;=10</code>时，需要使用<code>${n}</code>来获取参数。</p>
<p>另外，还有几个特殊变量用来处理参数，前面已经提到：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">特殊变量	说明
<span class="nv">$#</span>	传递给函数的参数个数。
<span class="nv">$*</span>	显示所有传递给函数的参数。
<span class="nv">$@</span>	与<span class="nv">$*</span>相同，但是略有区别，请查看Shell特殊变量。
<span class="nv">$?</span>	函数的返回值。
</code></pre></td></tr></table>
</div>
</div><h2 id="如何获取函数返回值">如何获取函数返回值</h2>
<p>后面的变量需要使用函数的返回值，怎么实现？</p>
<p>示例：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="cp">#!/bin/bash
</span><span class="cp"></span>
<span class="k">function</span> sum<span class="o">()</span>
<span class="o">{</span>
	<span class="nb">echo</span> <span class="sb">`</span>expr 1+2+3<span class="sb">`</span>
<span class="o">}</span>

<span class="nv">num</span><span class="o">=</span><span class="k">$(</span>sum<span class="k">)</span>

</code></pre></td></tr></table>
</div>
</div><p>这样就可以取到返回值了。</p>
<h1 id="06--shell脚本学习--其它">06- Shell脚本学习&ndash;其它</h1>
<h2 id="shell输入输出重定向">Shell输入输出重定向</h2>
<p>Unix 命令默认从标准输入设备(stdin)获取输入，将结果输出到标准输出设备(stdout)显示。一般情况下，标准输入设备就是键盘，标准输出设备就是终端，即显示器。
输出重定向</p>
<p>命令的输出不仅可以是显示器，还可以很容易的转移向到文件，这被称为输出重定向。</p>
<p>命令输出重定向的语法为：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="nb">command</span> &gt; file
</code></pre></td></tr></table>
</div>
</div><p>这样，输出到显示器的内容就可以被重定向到文件。</p>
<p>例如，下面的命令在显示器上不会看到任何输出：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">who &gt; users
</code></pre></td></tr></table>
</div>
</div><p>打开 users 文件，可以看到下面的内容：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">cat users

oko         tty01   Sep <span class="m">12</span> 07:30
ai          tty15   Sep <span class="m">12</span> 13:32
ruth        tty21   Sep <span class="m">12</span> 10:10
pat         tty24   Sep <span class="m">12</span> 13:07
steve       tty25   Sep <span class="m">12</span> 13:03
</code></pre></td></tr></table>
</div>
</div><p>输出重定向会覆盖文件内容，请看下面的例子：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="nb">echo</span> line <span class="m">1</span> &gt; users

cat users
line <span class="m">1</span>
</code></pre></td></tr></table>
</div>
</div><p>如果不希望文件内容被覆盖，可以使用 <code>&gt;&gt;</code> 追加到文件末尾，例如：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="nb">echo</span> line <span class="m">2</span> &gt;&gt; users

cat users
line <span class="m">1</span>
line <span class="m">2</span>
</code></pre></td></tr></table>
</div>
</div><p>输入重定向</p>
<p>和输出重定向一样，Unix 命令也可以从文件获取输入，语法为：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="nb">command</span> &lt; file
</code></pre></td></tr></table>
</div>
</div><p>这样，本来需要从键盘获取输入的命令会转移到文件读取内容。</p>
<p>注意：输出重定向是大于号(&gt;)，输入重定向是小于号(&lt;)。</p>
<p>例如，计算 users 文件中的行数，可以使用下面的命令：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">wc -l users
<span class="m">2</span> users
</code></pre></td></tr></table>
</div>
</div><p>也可以将输入重定向到 users 文件：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">wc -l &lt; users
<span class="m">2</span>
</code></pre></td></tr></table>
</div>
</div><p>注意：上面两个例子的结果不同：第一个例子，会输出文件名；第二个不会，因为它仅仅知道从标准输入读取内容。</p>
<h2 id="重定向深入讲解">重定向深入讲解</h2>
<p>一般情况下，每个 Unix/Linux 命令运行时都会打开三个文件：</p>
<ul>
<li><strong>标准输入文件(stdin)</strong>：stdin的文件描述符为0，Unix程序默认从stdin读取数据。</li>
<li><strong>标准输出文件(stdout)</strong>：stdout 的文件描述符为1，Unix程序默认向stdout输出数据。</li>
<li><strong>标准错误文件(stderr)</strong>：stderr的文件描述符为2，Unix程序会向stderr流中写入错误信息。</li>
</ul>
<p>默认情况下，<code>command &gt; file</code> 将 stdout 重定向到 file，<code>command &lt; file</code> 将stdin 重定向到 file。</p>
<p>如果希望 stderr 重定向到 file，可以这样写：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="nb">command</span> <span class="m">2</span> &gt; file
</code></pre></td></tr></table>
</div>
</div><p>如果希望 stderr 追加到 file 文件末尾，可以这样写：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="nb">command</span> <span class="m">2</span> &gt;&gt; file
</code></pre></td></tr></table>
</div>
</div><p>2 表示标准错误文件(stderr)。</p>
<p>如果希望将 stdout 和 stderr 合并后重定向到 file，可以这样写：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="nb">command</span> &gt; file 2&gt;<span class="p">&amp;</span><span class="m">1</span>
</code></pre></td></tr></table>
</div>
</div><p>如果希望对 stdin 和 stdout 都重定向，可以这样写：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="nb">command</span> &lt; file1 &gt;file2
</code></pre></td></tr></table>
</div>
</div><p>command 命令将 stdin 重定向到 file1，将 stdout 重定向到 file2。</p>
<p><strong>全部可用的重定向命令列表：</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">命令	说明
<span class="nb">command</span> &gt; file	将输出重定向到 file。
<span class="nb">command</span> &lt; file	将输入重定向到 file。
<span class="nb">command</span> &gt;&gt; file	将输出以追加的方式重定向到 file。
n &gt; file	将文件描述符为 n 的文件重定向到 file。
n &gt;&gt; file	将文件描述符为 n 的文件以追加的方式重定向到 file。
n &gt;<span class="p">&amp;</span> m	将输出文件 m 和 n 合并。
n &lt;<span class="p">&amp;</span> m	将输入文件 m 和 n 合并。
<span class="s">&lt;&lt; tag	将开始标记 tag</span> 和结束标记 tag 之间的内容作为输入。
</code></pre></td></tr></table>
</div>
</div><h2 id="here-document">Here Document</h2>
<p>Here Document 目前没有统一的翻译，这里暂译为<code>嵌入文档</code>。Here Document 是 Shell 中的一种特殊的重定向方式，它的基本的形式如下：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="nb">command</span> <span class="s">&lt;&lt; delimiter
</span><span class="s">    document
</span><span class="s">delimiter</span>
</code></pre></td></tr></table>
</div>
</div><p>它的作用是将两个 delimiter 之间的内容(document) 作为输入传递给 command。</p>
<p>注意：
<strong>结尾的delimiter 一定要顶格写</strong>，前面不能有任何字符，后面也不能有任何字符，包括空格和 tab 缩进。</p>
<p>开始的delimiter前后的空格会被忽略掉。</p>
<p>下面的例子，通过 <code>wc -l</code> 命令计算 document 的行数：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">wc -l <span class="s">&lt;&lt; EOF
</span><span class="s">    This is a simple lookup program
</span><span class="s">    for good (and bad) restaurants
</span><span class="s">    in Cape Town.
</span><span class="s">EOF</span>
</code></pre></td></tr></table>
</div>
</div><p>输出： 3</p>
<p>也可以 将 Here Document 用在脚本中，例如：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="cp">#!/bin/bash
</span><span class="cp"></span>cat <span class="s">&lt;&lt; EOF
</span><span class="s">This is a simple lookup program
</span><span class="s">for good (and bad) restaurants
</span><span class="s">in Cape Town.
</span><span class="s">EOF</span>
</code></pre></td></tr></table>
</div>
</div><p>运行结果：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">This is a simple lookup program
for good (and bad) restaurants
in Cape Town.
</code></pre></td></tr></table>
</div>
</div><h2 id="devnull-文件">/dev/null 文件</h2>
<p>如果希望执行某个命令，但又不希望在屏幕上显示输出结果，那么可以将输出重定向到 <code>/dev/null</code>：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="nb">command</span> &gt; /dev/null
</code></pre></td></tr></table>
</div>
</div><p><code>/dev/null</code> 是一个特殊的文件，写入到它的内容都会被丢弃；如果尝试从该文件读取内容，那么什么也读不到。但是 <code>/dev/null</code> 文件非常有用，将命令的输出重定向到它，会起到<code>禁止输出</code>的效果。</p>
<p>如果希望屏蔽 stdout 和 stderr，可以这样写：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="nb">command</span> &gt; /dev/null 2&gt;<span class="p">&amp;</span><span class="m">1</span>
</code></pre></td></tr></table>
</div>
</div><p>这样不会在屏幕打印任何信息。</p>
<h2 id="shell文件包含">Shell文件包含</h2>
<p>像其他语言一样，Shell 也可以包含外部脚本，将外部脚本的内容合并到当前脚本。</p>
<p>Shell 中包含脚本可以使用 <code>. filename</code> 或 <code>source filename</code> 。</p>
<p>两种方式的效果相同，简单起见，一般使用点号(.)，但是注意点号(.)和文件名中间有一空格。</p>
<p>示例：
被包含文件：sub.sh</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">name=&#34;yjc&#34;
</code></pre></td></tr></table>
</div>
</div><p>主文件：test.sh</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">. ./sub.sh
<span class="nb">echo</span> <span class="nv">$name</span>
</code></pre></td></tr></table>
</div>
</div><p>运行结果：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">yjc
</code></pre></td></tr></table>
</div>
</div><h2 id="获取当前正在执行脚本的绝对路径">获取当前正在执行脚本的绝对路径</h2>
<p>正确的命令是：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="nv">basepath</span><span class="o">=</span><span class="k">$(</span><span class="nb">cd</span> <span class="sb">`</span>dirname <span class="nv">$0</span><span class="sb">`</span><span class="p">;</span> <span class="nb">pwd</span><span class="k">)</span>
</code></pre></td></tr></table>
</div>
</div><p>直接使用<code>pwd</code>或者<code>dirname $0</code>是不对的。</p>
<h2 id="按特定字符串截取字符串">按特定字符串截取字符串</h2>
<p>示例：截取<code>/www/html/php/myapp/</code>里的myapp。</p>
<p>方案：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="nv">str</span><span class="o">=</span>/www/html/php/myapp/
<span class="nv">b</span><span class="o">=(</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$str</span><span class="p">|</span>sed <span class="s1">&#39;s#/# #g&#39;</span><span class="k">)</span><span class="o">)</span>
<span class="nv">b_len</span><span class="o">=</span><span class="sb">`</span>expr <span class="si">${#</span><span class="nv">b</span><span class="p">[*]</span><span class="si">}</span> - 1<span class="sb">`</span>
<span class="nv">app_name</span><span class="o">=</span><span class="si">${</span><span class="nv">b</span><span class="p">[</span><span class="nv">$b_len</span><span class="p">]</span><span class="si">}</span>
<span class="nb">echo</span> <span class="nv">$app_name</span>
</code></pre></td></tr></table>
</div>
</div><p>这里利用<code>sed</code>将字符串按指定字符截成数组，然后取最后一个。</p>
<p>计算数组长度：<code>${#arr[*]}</code><br>
计算则需要使用<code>expr</code>命令</p>
<h2 id="awk">awk</h2>
<h3 id="awk简介">awk简介</h3>
<p>awk是一个强大的文本分析工具，相对于grep的查找，sed的编辑，awk在其对数据分析并生成报告时，显得尤为强大。简单来说awk就是把文件(或其他方式的输入流, 如重定向输入)逐行的读入（看作一个记录集）, 把每一行看作一条记录，以空格(或\t,或用户自己指定的分隔符)为默认分隔符将每行切片（类似字段），切开的部分再进行各种分析处理。</p>
<p>awk有3个不同版本: awk、nawk和gawk，未作特别说明，一般指gawk，gawk 是 AWK 的 GNU 版本。</p>
<p>Awk基本语法:　</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">awk <span class="s1">&#39;pattern1 {command1;command 2…; command 3}  pattern2 { command …}&#39;</span>
</code></pre></td></tr></table>
</div>
</div><p>pattern表示用来过滤记录的模式,可是是正则表达式，关系运算表达式，也可以什么也没有(表示选中所有记录)。</p>
<p>每个pattern选中的行记录会被花括号括起来的命令command操作一遍, command之间用<code>;</code>分割。 花括号里面可以什么也没有, 则默认为print输出整行记录。 Comamnd可以是输出， 可以是算术运算，逻辑运算，循环控制等等。</p>
<h3 id="示例">示例</h3>
<p>s.txt</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">zhangsan 1977 male computer 83
lisi 1989 male math 99
wanglijiang 1990 female chinese 78
xuliang 1977 male economic 89
xuxin 1986 female english 99
wangxuebing 1978 male math 89
lichang 1989 male math 99
wanglijiang 1990 female chinese 78
zhangsansan 1977 male computer 83 
langxuebing 1978 male math 89
lisibao 1989 male math 99
xiaobao 1990 female chinese 78
</code></pre></td></tr></table>
</div>
</div><p>一行中的5个字段分别表示<code>姓名, 出生年, 性别,科目,分数</code>, 是一个很传统很典型的报表文件。</p>
<p>现在演示awk是如何查找的：</p>
<p>1)直接输出1990年出生的同学:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ awk <span class="s1">&#39;/1990/&#39;</span> s.txt

wanglijiang <span class="m">1990</span> female chinese <span class="m">78</span>
wanglijiang <span class="m">1990</span> female chinese <span class="m">78</span>
xiaobao <span class="m">1990</span> female chinese <span class="m">78</span>
 
</code></pre></td></tr></table>
</div>
</div><p>或者：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">$ awk &#39;/1990/{print $0}&#39; s.txt
</code></pre></td></tr></table>
</div>
</div><p>awk默认把输入的内容以空格拆分出每列。<code>$0</code>表示匹配所有列，<code>print $0</code>将输出所有列，每列分隔符是空格。</p>
<p>2）对chinese的课程的行输出&quot;语文&rdquo;：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ awk <span class="s1">&#39;/chinese/{print &#34;语文&#34;}&#39;</span> s.txt

语文
语文
语文

</code></pre></td></tr></table>
</div>
</div><p>3）记录的头部和结尾加上一段说明：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ awk <span class="s1">&#39;BEGIN{print &#34;Result of the quiz:\n&#34;}{print $0}END{print &#34;------&#34;}&#39;</span> s.txt
Result of the quiz:

zhangsan <span class="m">1977</span> male computer <span class="m">83</span>
lisi <span class="m">1989</span> male math <span class="m">99</span>
wanglijiang <span class="m">1990</span> female chinese <span class="m">78</span>
xuliang <span class="m">1977</span> male economic <span class="m">89</span>
xuxin <span class="m">1986</span> female english <span class="m">99</span>
wangxuebing <span class="m">1978</span> male math <span class="m">89</span>
lichang <span class="m">1989</span> male math <span class="m">99</span>
wanglijiang <span class="m">1990</span> female chinese <span class="m">78</span>
zhangsansan <span class="m">1977</span> male computer <span class="m">83</span>
langxuebing <span class="m">1978</span> male math <span class="m">89</span>
lisibao <span class="m">1989</span> male math <span class="m">99</span>
xiaobao <span class="m">1990</span> female chinese <span class="m">78</span>
------

</code></pre></td></tr></table>
</div>
</div><p>AWK工作流程：<strong>逐行扫描文件，从第一行到最后一行，寻找匹配特定模式的行，并在这些行上进行用户想要到的操作</strong>。</p>
<p>BEGIN只会在最开始执行；END只会在扫描所有行数之后执行。BEGIN和END之间的花括号的内容每扫描一行都会执行。</p>
<p>4)查找女生的成绩且只输出姓名、学科、成绩：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ awk <span class="s1">&#39;$3==&#34;female&#34;{print $1,$4,$5}&#39;</span> s.txt
wanglijiang chinese <span class="m">78</span>
xuxin english <span class="m">99</span>
wanglijiang chinese <span class="m">78</span>
xiaobao chinese <span class="m">78</span>

</code></pre></td></tr></table>
</div>
</div><p><code>$1</code>表示第1列，<code>$n</code>类推。这里条件是表达式，而不是正则。print里<code>,</code>表示空格分隔符。</p>
<p>5)找出1990年出生的学生姓名，并要求匹配正则:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ awk <span class="s1">&#39;$2~/1990/{print $1}&#39;</span> s.txt
wanglijiang
wanglijiang
xiaobao

</code></pre></td></tr></table>
</div>
</div><p>这里<code>~</code>表示匹配正则表达式。<code>!~</code>表示不匹配正则表达式。</p>
<p>如果需要多选，则改成：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ awk <span class="s1">&#39;$2~/(1990|1991)/{print $1}&#39;</span> s.txt
</code></pre></td></tr></table>
</div>
</div><p>awk更多内容详见：https://www.cnblogs.com/52fhy/p/5836429.html#autoid-3-4-0</p>
<p>（完结）</p>

    </div>

    <div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">文章作者</span>
    <span class="item-content">gzxb0712</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">上次更新</span>
    <span class="item-content">
        2020-08-16 21:01
        
    </span>
  </p>
  
  <p class="copyright-item">
    <span class="item-title">许可协议</span>
    <span class="item-content"><a target="_blank" rel="license noopener" href="https://github.com/gzxb0712/blog/blob/master/LICENSE">MIT</a></span>
  </p>
</div>
<div class="post-reward">
  <input type="checkbox" name="reward" id="reward" hidden />
  <label class="reward-button" for="reward">赞赏支持</label>
  <div class="qr-code">
    
    <label class="qr-code-image" for="reward">
        <img class="image" src="/images/wechat.png">
        <span>微信佛系打赏</span>
      </label>
    <label class="qr-code-image" for="reward">
        <img class="image" src="/images/alipay.jpg">
        <span>支付宝佛系打赏</span>
      </label>
  </div>
</div><footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/bash/">bash</a>
          <a href="/tags/shell/">shell</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/shell/sed_awk_doc/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">Linux文本三剑客---grep、sed、awk</span>
            <span class="prev-text nav-mobile">上一篇</span>
          </a>
        <a class="next" href="/post/performance/mysql_perf_doc/">
            <span class="next-text nav-default">mysql性能优化</span>
            <span class="next-text nav-mobile">下一篇</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="http://www.cnblogs.com/gzxb0712" class="iconfont icon-cnblogs" title="cnblogs"></a>
      <a href="mailto:gzxb0712@qq.com" class="iconfont icon-email" title="email"></a>
      <a href="https://github.com/gzxb0712" class="iconfont icon-github" title="github"></a>
      <a href="https://juejin.im/user/59aeb829f265da249960595a" class="iconfont icon-juejin" title="juejin"></a>
      <a href="https://www.v2ex.com/member/gzxb0712" class="iconfont icon-v2ex" title="v2ex"></a>
  <a href="https://xiebiao.top/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    由 <a class="hexo-link" href="https://gohugo.io">Hugo</a> 强力驱动
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    主题 - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  <div class="busuanzi-footer">
    <span id="busuanzi_container_site_pv"> 本站总访问量 <span id="busuanzi_value_site_pv"><img src="/img/spinner.svg" alt="spinner.svg"/></span> 次 </span>
      <span class="division">|</span>
    <span id="busuanzi_container_site_uv"> 本站总访客数 <span id="busuanzi_value_site_uv"><img src="/img/spinner.svg" alt="spinner.svg"/></span> 人 </span>
  </div>

  <span class="copyright-year">
    &copy; 
    2019 - 
    2020
    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">gzxb0712</span>
  </span>
</div>
    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/timeago.js@3.0.2/dist/timeago.min.js" integrity="sha256-jwCP0NAdCBloaIWTWHmW4i3snUNMHUNO+jr9rYd2iOI=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/timeago.js@3.0.2/dist/timeago.locales.min.js" integrity="sha256-ZwofwC1Lf/faQCzN7nZtfijVV6hSwxjQMwXL4gn9qU8=" crossorigin="anonymous"></script>
  <script><!-- NOTE: timeago.js uses the language code format like "zh_CN" (underscore and case sensitive) -->
    var languageCode = "zh-CN".replace(/-/g, '_').replace(/_(.*)/, function ($0, $1) {return $0.replace($1, $1.toUpperCase());});
    timeago().render(document.querySelectorAll('.timeago'), languageCode);
    timeago.cancel();  
  </script>



<script type="text/javascript" src="/js/main.min.d7b7ada643c9c1a983026e177f141f7363b4640d619caf01d8831a6718cd44ea.js"></script>


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-138883536-1', 'auto');
	ga('set', 'anonymizeIp', true);
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>







</body>
</html>
